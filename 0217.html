<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>鄭老師的推薦 2026春 | JAPANKURU × 日本藥妝研究室</title>
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&family=Noto+Serif+TC:wght@400;500;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;500;600&family=Noto+Sans+JP:wght@400;500;700&family=Noto+Serif+JP:wght@400;500;700&family=Zen+Kurenaido&display=swap" rel="stylesheet">
  
  <style>
    html { scroll-behavior: smooth; scroll-padding-top: 90px; }

    :root {
      --ink: #1a1a1a;
      --ink-light: #4a4a4a;
      --ink-muted: #8a8a8a;
      --ink-faint: #c5c5c5;
      --paper: #fefefe;
      --paper-warm: #faf9f7;
      --accent: #d4707a;
      --accent-soft: #f2e4e6;
      --sakura: #FFB7C5;
      --gold: #C9A962;
      --blue: #5B8DB8;
      --green: #7A9A7E;
      --bg: #FFFBFC;
      --white: #fff;
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    body { 
      font-family: 'Noto Sans TC', 'Noto Sans JP', sans-serif; 
      background: var(--bg); 
      color: var(--ink-light); 
      line-height: 1.8;
      padding-bottom: 70px;
    }

    @media (max-width: 768px) {
      body { padding-bottom: calc(80px + env(safe-area-inset-bottom, 0)); }
    }

    /* === Header === */

    /* === Mobile Section Nav (sticky under header) === */
    .section-nav {
      display: none;
      position: fixed;
      top: 48px; /* TODO: JAPANKURU 실제 헤더 높이에 맞춰 조정 */
      left: 0; right: 0;
      z-index: 999;
      background: rgba(255,255,255,0.95);
      backdrop-filter: blur(16px);
      border-bottom: 1px solid rgba(0,0,0,0.06);
      overflow-x: auto;
      -webkit-overflow-scrolling: touch;
      scrollbar-width: none;
    }
    .section-nav::-webkit-scrollbar { display: none; }
    .section-nav-inner {
      display: flex;
      gap: 0;
      padding: 0 12px;
      white-space: nowrap;
      min-width: max-content;
    }
    .section-nav-item {
      padding: 10px 14px;
      font-size: 11px;
      font-weight: 600;
      color: #9a918a;
      text-decoration: none;
      border-bottom: 2px solid transparent;
      transition: all 0.2s;
      flex-shrink: 0;
      display: flex; align-items: center; gap: 4px;
    }
    .section-nav-item:hover,
    .section-nav-item.is-active {
      color: #C85070;
      border-bottom-color: #C85070;
    }
    .section-nav-item .nav-emoji { font-size: 13px; }

    @media (max-width: 768px) {
      .section-nav { display: block; }
      /* Adjust body padding for double sticky bars */
      .hero { margin-top: 38px; }
    }
    @media (min-width: 769px) {
      .section-nav { display: none !important; }
    }

    .header {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      background: rgba(255,255,255,0.98);
      backdrop-filter: blur(20px);
      z-index: 1000;
      transition: all 0.3s;
    }

    .header.scrolled { box-shadow: 0 1px 0 rgba(0,0,0,0.06); }

    .header-inner {
      max-width: 1200px;
      margin: 0 auto;
      padding: 12px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .collab-logo {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .collab-logo img { height: 20px; }
    .collab-x { color: var(--ink-faint); font-weight: 300; }

    .partner-logo {
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .partner-logo-img { height: 32px; object-fit: contain; }
    .partner-name { font-size: 0.75rem; font-weight: 700; color: var(--ink); }
    .header-season { font-size: 11px; color: var(--ink-muted); letter-spacing: 0.1em; }

    /* PC header nav */
    .header-nav {
      display: none;
      align-items: center; gap: 4px;
    }
    .header-nav-item {
      padding: 6px 12px;
      font-size: 12px; font-weight: 600;
      color: #6b635d; text-decoration: none;
      border-radius: 999px;
      transition: all 0.2s;
      white-space: nowrap;
    }
    .header-nav-item:hover {
      color: #C85070; background: #FFF0F3;
    }
    .header-nav-item.is-active {
      color: #C85070; background: #FFF0F3;
    }
    @media (min-width: 769px) {
      .header-nav { display: flex; }
      .header-season { display: none; }
    }

    /* === Hero === */
    .hero {
      margin-top: 52px;
      padding-top: 60px;
      min-height: 90vh;
      background: linear-gradient(180deg, #fff0f3 0%, #fff 60%, #fff 100%);
      position: relative;
      overflow: hidden;
      display: flex;
      align-items: center;
    }

    .hero::before {
      content: '';
      position: absolute;
      top: -5%;
      right: -10%;
      width: 50vw;
      height: 50vw;
      background: radial-gradient(circle, rgba(255, 183, 197, 0.15) 0%, transparent 70%);
      border-radius: 50%;
    }

    .sakura-petal {
      position: absolute;
      width: 12px;
      height: 12px;
      background: linear-gradient(135deg, var(--sakura) 0%, #FFD6E0 100%);
      border-radius: 150% 0 150% 0;
      opacity: 0;
      animation: fall linear infinite;
      pointer-events: none;
      z-index: 1;
    }

    @keyframes fall {
      0% { transform: translateY(-50px) rotate(0deg) translateX(0); opacity: 0; }
      10% { opacity: 0.6; }
      90% { opacity: 0.6; }
      100% { transform: translateY(100vh) rotate(720deg) translateX(100px); opacity: 0; }
    }

    .hero-inner {
      max-width: 1100px;
      margin: 0 auto;
      padding: 20px 24px;
      position: relative;
      z-index: 2;
      display: grid;
      grid-template-columns: 1fr 1.4fr;
      align-items: center;
      gap: 40px;
    }

    .hero-text-area { text-align: left; }

    .hero-tag-group {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }

    .hero-tag {
      font-size: 11px;
      font-weight: 700;
      padding: 6px 12px;
      border-radius: 20px;
      letter-spacing: 0.05em;
    }

    .tag-season { background: var(--accent); color: #fff; }
    .tag-target { background: var(--ink); color: #fff; }

    .hero h1 {
      font-family: 'Noto Serif TC', 'Noto Serif JP', serif;
      font-size: clamp(1.5rem, 3.8vw, 2.6rem);
      font-weight: 600;
      line-height: 1.5;
      color: var(--ink);
      margin-bottom: 24px;
    }

    .hero h1 .hl-text {
      color: var(--accent);
      position: relative;
      display: inline-block;
    }

    .hero h1 .hl-text::after {
      content: '';
      position: absolute;
      bottom: 6px;
      left: 0;
      width: 100%;
      height: 14px;
      background: rgba(212, 112, 122, 0.15);
      z-index: -1;
      transform: skewX(-15deg);
    }

    .hero-subtitle {
      font-size: 15px;
      line-height: 1.9;
      color: var(--ink-light);
      margin-bottom: 24px;
    }

    .hero-subtitle em {
      font-style: normal;
      background: linear-gradient(transparent 60%, rgba(212, 112, 122, 0.18) 60%);
      padding: 0 2px;
    }

    .hero-story-box {
      margin-bottom: 32px;
      background: rgba(255,255,255,0.7);
      backdrop-filter: blur(8px);
      border-radius: 16px;
      padding: 24px;
      border: 1px solid rgba(0,0,0,0.05);
    }

    .story-lead {
      font-size: 14px;
      line-height: 2;
      color: var(--ink-light);
      margin-bottom: 16px;
    }

    .story-books {
      display: flex;
      gap: 8px;
    }

    .story-books img {
      width: 56px;
      height: 78px;
      object-fit: cover;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      transition: transform 0.3s;
    }

    .story-books img:hover {
      transform: translateY(-4px) rotate(2deg);
    }

    .hero-cta-btn {
      background: linear-gradient(135deg, var(--accent), #c45d67);
      color: #fff;
      padding: 20px 42px;
      border-radius: 50px;
      font-weight: 700;
      font-size: 16px;
      box-shadow: 0 10px 30px rgba(212, 112, 122, 0.35);
      border: none;
      cursor: pointer;
      transition: all 0.3s;
      display: inline-flex;
      align-items: center;
      gap: 12px;
      letter-spacing: 0.03em;
      animation: cta-pulse 3s ease-in-out infinite;
    }

    @keyframes cta-pulse {
      0%, 100% { box-shadow: 0 10px 30px rgba(212, 112, 122, 0.35); }
      50% { box-shadow: 0 12px 40px rgba(212, 112, 122, 0.55); }
    }

    .hero-cta-btn:hover {
      transform: translateY(-4px) scale(1.02);
      box-shadow: 0 15px 40px rgba(212, 112, 122, 0.5);
    }

    .hero-visual-area {
      position: relative;
      display: flex;
      justify-content: center;
      align-items: flex-end;
    }

    .tei-wrapper {
      position: relative;
      width: 100%;
      max-width: 800px;
    }

    .tei-photo-stack {
      position: relative;
      width: 100%;
    }

    .tei-photo {
      width: 100%;
      height: auto;
      filter: drop-shadow(0 20px 40px rgba(0,0,0,0.08));
      mask-image: linear-gradient(to bottom, black 90%, transparent 100%);
    }
    .tei-photo.tei-slide {
      position: absolute;
      top: 0;
      left: 0;
      opacity: 0;
      transition: opacity 0.8s ease-in-out;
    }
    .tei-photo.tei-slide.active {
      opacity: 1;
      position: relative;
    }

    .tei-speech {
      position: absolute;
      background: #fff;
      padding: 16px 24px;
      border-radius: 20px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
      z-index: 5;
      max-width: 220px;
      opacity: 0;
      transition: opacity 0.6s ease-in-out;
      pointer-events: none;
    }
    .tei-speech.active {
      opacity: 1;
      pointer-events: auto;
    }
    /* Slide 0: IMG_9993 - right hand up, bubble top-left */
    .tei-speech-0 {
      top: 60px;
      left: -40px;
      border-radius: 20px 20px 20px 0;
    }
    /* Slide 1: IMG_0005 - X pose (arms crossed), bubble top-center */
    .tei-speech-1 {
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      border-radius: 20px;
    }
    /* Slide 2: IMG_0008 - happy overhead pose, bubble top-center */
    .tei-speech-2 {
      top: -10px;
      left: 50%;
      transform: translateX(-50%);
      border-radius: 20px;
    }

    .speech-slide {
      /* handled by .tei-speech now */
    }

    .speech-text {
      font-family: 'Noto Serif TC', 'Zen Kurenaido', serif;
      font-size: 15px;
      line-height: 1.7;
      color: var(--ink);
      font-weight: 500;
    }

    .speech-text em {
      font-style: normal;
      color: var(--accent);
      font-weight: 700;
    }

    /* Slide dots */
    .tei-slide-dots {
      display: flex;
      gap: 8px;
      justify-content: center;
      margin-top: 12px;
      position: relative;
      z-index: 5;
    }
    .tei-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: var(--ink-faint);
      cursor: pointer;
      transition: all 0.3s;
    }
    .tei-dot.active {
      background: var(--accent);
      width: 24px;
      border-radius: 4px;
    }

    .tei-name-tag {
      position: absolute;
      bottom: 20px;
      right: -10px;
      background: rgba(255,255,255,0.9);
      backdrop-filter: blur(10px);
      padding: 12px 24px;
      border-left: 4px solid var(--accent);
    }

    .name-jp { font-size: 20px; font-weight: 700; color: var(--ink); }
    .name-role { font-size: 11px; color: var(--ink-muted); }

    @keyframes float {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-8px); }
    }

    @media (max-width: 900px) {
      .pc-only { display: none; }
      .hero-inner { grid-template-columns: 1fr; gap: 30px; padding-top: 80px; }
      .hero-text-area { text-align: center; }
      .hero-tag-group { justify-content: center; }
      .hero-visual-area { order: -1; margin-bottom: -30px; width: 100%; }
      .tei-wrapper { max-width: 90vw; margin: 0 auto; }
      .tei-speech { padding: 12px 16px; max-width: 160px; font-size: 13px; }
      .tei-speech-0 { top: 10px; left: auto; right: 55%; }
      .tei-speech-1 { top: 5px; left: 50%; right: auto; }
      .tei-speech-2 { top: 5px; left: 50%; right: auto; }
      .story-books img { width: 46px; height: 64px; }
      .hero h1 { font-size: 1.75rem; line-height: 1.5; }
      .hero h1 .hl-text::after { height: 10px; bottom: 4px; }
    }
    @media (max-width: 480px) {
      .hero h1 { font-size: 1.5rem; }
    }

    /* === Split Banner === */
    .split-banner-section {
      padding: 100px 0;
      background: linear-gradient(180deg, #fff 0%, var(--accent-soft) 50%, #fff 100%);
      position: relative;
      overflow: hidden;
    }

    .sakura-float {
      position: absolute;
      font-size: 100px;
      color: var(--accent);
      opacity: 0.05;
      pointer-events: none;
    }

    .sakura-float.left { top: 10%; left: 5%; transform: rotate(-10deg); }
    .sakura-float.right { bottom: 15%; right: 5%; transform: rotate(15deg); }

    .split-header {
      text-align: center;
      max-width: 800px;
      margin: 0 auto 60px;
      padding: 0 24px;
      position: relative;
      z-index: 1;
    }

    .split-eyebrow {
      font-family: 'Cormorant Garamond', serif;
      font-size: 13px;
      letter-spacing: 0.35em;
      color: var(--accent);
      font-weight: 600;
      text-transform: uppercase;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 16px;
      margin-bottom: 20px;
    }

    .split-eyebrow::before,
    .split-eyebrow::after {
      content: '✿';
      font-size: 12px;
      opacity: 0.6;
    }

    .split-title {
      font-family: 'Noto Serif TC', 'Noto Serif JP', serif;
      font-size: 30px;
      font-weight: 500;
      color: var(--ink);
      margin-bottom: 16px;
      line-height: 1.5;
    }

    .split-subtitle {
      font-size: 14px;
      color: #666;
      line-height: 2;
    }

    .split-container {
      display: flex;
      width: 100%;
      max-width: 1300px;
      margin: 0 auto;
      height: 550px;
      overflow: hidden;
      border-radius: 16px;
      box-shadow: 0 30px 80px rgba(212, 112, 122, 0.12);
      position: relative;
      z-index: 1;
    }

    .split-panel {
      position: relative;
      flex: 1;
      transition: flex 0.6s cubic-bezier(0.25, 1, 0.5, 1);
      overflow: hidden;
      cursor: pointer;
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
      padding: 45px;
      text-decoration: none;
      color: #fff;
    }

    .split-panel:not(:last-child) {
      border-right: 1px solid rgba(255,255,255,0.1);
    }

    .split-bg {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 0.8s cubic-bezier(0.25, 1, 0.5, 1);
    }

    .split-panel::before {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(to top, rgba(45, 35, 38, 0.9) 0%, rgba(45, 35, 38, 0.4) 40%, rgba(212, 112, 122, 0.1) 100%);
      z-index: 1;
      transition: all 0.5s;
    }

    .split-panel:hover { flex: 2.2; }
    .split-panel:hover .split-bg { transform: scale(1.08); }

    .split-plan-tag {
      display: none !important;
    }



    .split-logo {
      position: absolute;
      top: 25px;
      left: 25px;
      z-index: 3;
      background: #fff;
      padding: 10px 16px;
    }

    .split-logo-text {
      font-family: 'Cormorant Garamond', serif;
      font-size: 14px;
      font-weight: 600;
      letter-spacing: 0.1em;
      color: var(--ink);
    }

    .split-content { position: relative; z-index: 2; }

    .split-num {
      font-family: 'Cormorant Garamond', serif;
      font-size: 48px;
      font-weight: 400;
      font-style: italic;
      color: var(--accent);
      opacity: 0.7;
      margin-bottom: 12px;
      display: block;
      line-height: 1;
    }

    .split-brand {
      font-family: 'Cormorant Garamond', serif;
      font-size: 11px;
      letter-spacing: 0.2em;
      text-transform: uppercase;
      background: var(--accent);
      color: #fff;
      padding: 5px 12px;
      display: inline-block;
      margin-bottom: 16px;
      font-weight: 600;
    }

    .split-headline {
      font-family: 'Noto Serif TC', 'Noto Serif JP', serif;
      font-size: 22px;
      font-weight: 500;
      line-height: 1.5;
      text-shadow: 0 2px 10px rgba(0,0,0,0.3);
    }

    .split-desc {
      max-height: 0;
      opacity: 0;
      overflow: hidden;
      font-size: 13px;
      line-height: 1.8;
      color: rgba(255,255,255,0.8);
      transition: all 0.5s ease;
    }

    .split-panel:hover .split-desc {
      max-height: 120px;
      opacity: 1;
      margin-top: 16px;
    }

    .split-btn {
      margin-top: 20px;
      font-size: 12px;
      font-weight: 600;
      display: inline-flex;
      align-items: center;
      gap: 10px;
      opacity: 0;
      transform: translateY(15px);
      transition: all 0.4s ease 0.1s;
      color: var(--accent-soft);
    }

    .split-panel:hover .split-btn {
      opacity: 1;
      transform: translateY(0);
    }

    .split-footer {
      text-align: center;
      margin-top: 50px;
      position: relative;
      z-index: 1;
    }

    .split-cta {
      display: inline-flex;
      align-items: center;
      gap: 14px;
      padding: 20px 50px;
      background: linear-gradient(135deg, var(--accent), #c45d67);
      color: #fff;
      font-size: 15px;
      font-weight: 700;
      letter-spacing: 0.1em;
      text-decoration: none;
      transition: all 0.4s;
      border-radius: 50px;
      box-shadow: 0 8px 25px rgba(212, 112, 122, 0.3);
    }

    .split-cta:hover {
      background: #c45d67;
      transform: translateY(-3px);
      box-shadow: 0 15px 40px rgba(212, 112, 122, 0.3);
    }

    @media (max-width: 900px) {
      .split-banner-section { padding: 60px 0; }
      .split-container {
        flex-direction: row;
        overflow-x: auto;
        scroll-snap-type: x mandatory;
        height: 420px;
        border-radius: 0;
        box-shadow: none;
        -ms-overflow-style: none;
        scrollbar-width: none;
      }
      .split-container::-webkit-scrollbar { display: none; }
      .split-panel {
        flex: 0 0 85vw;
        height: 380px;
        scroll-snap-align: center;
        margin-left: 20px;
        border-radius: 12px;
        box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        padding: 30px 24px;
      }
      .split-panel:last-child { margin-right: 20px; }
      .split-panel:not(:last-child) { border-right: none; }
      .split-panel:hover { flex: 0 0 85vw; }
      .split-desc { max-height: 100px; opacity: 1; margin-top: 12px; }
      .split-btn { opacity: 1; transform: translateY(0); margin-top: 14px; }
      .split-title { font-size: 24px; }
      .sakura-float { display: none; }
    }

    /* === Featured Carousel === */
    .featured-section {
      padding: 70px 24px 60px;
      background: linear-gradient(180deg, var(--paper) 0%, #f5f0ed 50%, var(--paper) 100%);
      position: relative;
    }

    .featured-section::before {
      content: '';
      position: absolute;
      top: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 1px;
      height: 40px;
      background: linear-gradient(to bottom, var(--accent), transparent);
    }

    .featured-header {
      text-align: center;
      margin-bottom: 40px;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
    }

    .featured-eyebrow {
      display: inline-block;
      font-size: 11px;
      letter-spacing: 2px;
      color: var(--accent);
      text-transform: uppercase;
      margin-bottom: 16px;
      font-weight: 600;
    }

    .featured-title {
      font-family: 'Noto Serif TC', 'Noto Serif JP', serif;
      font-size: 22px;
      font-weight: 500;
      color: var(--ink);
      margin-bottom: 16px;
      line-height: 1.6;
    }

    .featured-subtitle {
      font-size: 14px;
      color: var(--ink-muted);
      line-height: 1.8;
    }

    .featured-carousel {
      display: flex;
      gap: 20px;
      overflow-x: auto;
      scroll-snap-type: x mandatory;
      padding: 10px 0 24px;
      max-width: 1200px;
      margin: 0 auto;
      -webkit-overflow-scrolling: touch;
    }

    .featured-carousel::-webkit-scrollbar { height: 4px; }
    .featured-carousel::-webkit-scrollbar-track { background: rgba(0,0,0,0.05); }
    .featured-carousel::-webkit-scrollbar-thumb { background: var(--accent); }

    .featured-card {
      flex: 0 0 280px;
      height: 360px;
      scroll-snap-align: start;
      border-radius: 20px;
      overflow: hidden;
      cursor: pointer;
      transition: all 0.4s ease;
      position: relative;
    }

    .featured-card:first-child { margin-left: 24px; }
    .featured-card:last-child { margin-right: 24px; }

    .featured-card:hover {
      transform: translateY(-6px) scale(1.02);
      box-shadow: 0 20px 40px rgba(0,0,0,0.25);
    }

    .featured-card-bg {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 0.6s ease;
    }

    .featured-card:hover .featured-card-bg { transform: scale(1.1); }

    .featured-card-overlay {
      position: absolute;
      inset: 0;
      background: linear-gradient(to top, rgba(0,0,0,0.85) 0%, rgba(0,0,0,0.4) 50%, rgba(0,0,0,0.15) 100%);
    }

    .featured-card-inner {
      position: absolute;
      inset: 0;
      padding: 24px;
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
      color: #fff;
    }

    .featured-card-tag {
      display: none !important;
    }

    /* Featured card tag styles removed */

    .featured-card-title {
      font-family: 'Noto Serif TC', 'Noto Serif JP', serif;
      font-size: 20px;
      font-weight: 700;
      line-height: 1.3;
      margin-bottom: 10px;
    }

    .featured-card-copy {
      font-size: 12px;
      line-height: 1.7;
      opacity: 0.9;
      margin-bottom: 16px;
    }

    .featured-card-btn {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      font-size: 11px;
      font-weight: 600;
      color: #fff;
      background: rgba(255,255,255,0.15);
      backdrop-filter: blur(10px);
      padding: 10px 16px;
      border-radius: 25px;
      width: fit-content;
      transition: all 0.3s;
    }

    .featured-card:hover .featured-card-btn { background: var(--accent); }

    .scroll-hint {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      margin-top: 16px;
      font-size: 11px;
      color: #aaa;
    }

    .scroll-hint i { animation: bounce-x 1.5s infinite; }

    @keyframes bounce-x {
      0%, 100% { transform: translateX(0); }
      50% { transform: translateX(5px); }
    }

    @media (max-width: 768px) {
      .featured-section { padding: 50px 0 40px; }
      .featured-header { padding: 0 20px; }
      .featured-card { flex: 0 0 240px; height: 320px; }
      .featured-card:first-child { margin-left: 16px; }
      .featured-card:last-child { margin-right: 16px; }
    }

    /* === Section Transition === */
    .section-transition {
      text-align: center;
      padding: 40px 24px;
      background: linear-gradient(180deg, var(--paper) 0%, var(--bg) 100%);
    }

    .section-transition p {
      font-family: 'Noto Serif TC', 'Noto Serif JP', serif;
      font-size: 15px;
      color: var(--ink-muted);
      letter-spacing: 0.1em;
    }

    /* === Products Section === */
    .products-section {
      padding: 60px 24px 80px;
      max-width: 1100px;
      margin: 0 auto;
    }

    .section-header {
      text-align: center;
      margin-bottom: 40px;
    }

    .section-header h2 {
      font-family: 'Noto Serif TC', 'Noto Serif JP', serif;
      font-size: 22px;
      font-weight: 500;
      color: var(--ink);
      margin-bottom: 8px;
    }

    .section-header p {
      font-size: 13px;
      color: var(--ink-muted);
    }

    .card-hint {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      padding: 14px 20px;
      margin: 0 auto 30px;
      max-width: 500px;
      background: linear-gradient(135deg, var(--accent-soft) 0%, #fef8f8 100%);
      border-radius: 50px;
      font-size: 13px;
      color: var(--ink-light);
      border: 1px solid rgba(212, 112, 122, 0.15);
    }

    .card-hint i { color: var(--accent); }
    .card-hint strong { color: var(--accent); font-weight: 600; }
    .card-hint .hint-mobile { display: none; }

    @media (max-width: 580px) {
      .card-hint .hint-pc { display: none; }
      .card-hint .hint-mobile { display: inline; }
    }

    @media (max-width: 600px) {
      .card-hint { font-size: 12px; padding: 12px 16px; margin: 0 16px 24px; max-width: none; }
    }

    /* Tabs */
    .tabs-nav {
      display: flex;
      justify-content: center;
      gap: 8px;
      margin-bottom: 40px;
      flex-wrap: wrap;
    }

    .tab-btn {
      background: var(--white);
      border: 1px solid #e5e5e5;
      padding: 12px 24px;
      font-size: 13px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s;
      color: var(--ink-light);
    }

    .tab-btn:hover { border-color: var(--ink-faint); }

    .tab-btn.active {
      background: var(--ink);
      border-color: var(--ink);
      color: #fff;
    }

    @media (max-width: 600px) {
      .tabs-nav {
        position: sticky;
        top: 56px;
        z-index: 100;
        background: rgba(255,255,255,0.98);
        backdrop-filter: blur(10px);
        flex-wrap: nowrap;
        overflow-x: auto;
        justify-content: flex-start;
        padding: 12px 16px;
        margin: 0 -24px 20px;
        border-bottom: 1px solid #eee;
      }
      .tabs-nav::-webkit-scrollbar { display: none; }
      .tab-btn { flex: 0 0 auto; padding: 10px 18px; font-size: 12px; }
    }

    .tab-content {
      display: none;
      opacity: 0;
      transform: translateY(16px);
    }

    .tab-content.active {
      display: block;
      animation: fadeIn 0.4s ease forwards;
    }

    @keyframes fadeIn {
      to { opacity: 1; transform: translateY(0); }
    }

    @keyframes highlight-flash {
      0% { box-shadow: 0 0 0 0 rgba(212, 112, 122, 0.7); }
      70% { box-shadow: 0 0 0 20px rgba(212, 112, 122, 0); }
      100% { box-shadow: 0 0 0 0 rgba(212, 112, 122, 0); }
    }

    .target-highlight { animation: highlight-flash 1.5s ease-out forwards; z-index: 5; }

    /* Products Grid - Masonry Layout */
    .products-grid {
      column-count: 3;
      column-gap: 20px;
    }

    .products-grid .item-card {
      break-inside: avoid;
      margin-bottom: 20px;
    }

    @media (max-width: 900px) { 
      .products-grid { column-count: 2; } 
    }
    @media (max-width: 580px) { .products-grid { grid-template-columns: 1fr; } }

    /* Card */
    .item-card {
      background: #fff;
      border: 1px solid #e0e0e0;
      border-radius: 12px;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      transition: transform 0.3s, box-shadow 0.3s;
      cursor: pointer;
    }

    .item-card:hover {
      transform: translateY(-6px);
      box-shadow: 0 20px 40px rgba(212, 112, 122, 0.12), 0 8px 16px rgba(0,0,0,0.06);
    }

    /* Basic Plan styles removed for public LP */

    /* Plan Badge - positioned in content area */
    .plan-badge {
      display: none !important;
    }

    /* Plan badge styles removed */

    .plan-badge i { font-size: 9px; }

    /* Mobile Compact View */
    @media (max-width: 580px) {
      .products-grid {
        column-count: unset;
        display: flex;
        flex-direction: column;
        gap: 12px;
      }

      .products-grid .item-card {
        break-inside: unset;
        margin-bottom: 0;
      }

      .item-card {
        flex-direction: row;
        align-items: stretch;
        border-radius: 12px;
        min-height: 120px;
      }

      .item-card.basic-plan::before {
        left: auto;
        right: 12px;
        top: -1px;
      }

      .item-card .item-thumb {
        width: 110px;
        min-width: 110px;
        aspect-ratio: unset;
        height: auto;
        border-bottom: none;
        border-right: 1px solid #f0f0f0;
        border-radius: 12px 0 0 12px;
      }

      .item-card .item-thumb img {
        padding: 10px;
      }

      .item-card .video-overlay { display: none; }
      .item-card .media-indicators { display: none; }

      .item-card .btn-like-float {
        width: 28px;
        height: 28px;
        font-size: 14px;
        top: 6px;
        right: 6px;
      }

      .item-card .item-label {
        font-size: 8px;
        padding: 2px 6px;
        top: 6px;
        left: 6px;
      }

      .item-card .item-content {
        padding: 12px;
        flex: 1;
        justify-content: center;
      }

      .item-card .item-name {
        font-size: 13px;
        margin-bottom: 4px;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
      }

      .item-card .item-price-row {
        margin-bottom: 8px;
        padding-bottom: 8px;
      }

      .item-card .item-price {
        font-size: 15px;
      }

      .item-card .price-label {
        font-size: 9px;
      }

      /* Hide long content in compact mode */
      .item-card .che-section { display: none; }
      .item-card .monitor-preview { display: none; }
      .item-card .column-preview { display: none; }
      .item-card .voice-preview-section { display: none; }
      
      .item-card .plan-badge { 
        font-size: 9px; 
        padding: 3px 8px;
        margin-bottom: 8px;
      }

      /* Compact footer */
      .item-card .card-footer {
        gap: 6px;
      }

      .item-card .btn-main {
        padding: 10px;
        font-size: 11px;
      }

      .item-card .btn-badge {
        font-size: 8px;
        padding: 1px 5px;
      }

      .item-card .btn-share {
        width: 36px;
        height: 36px;
        font-size: 14px;
      }

      /* Expanded card state */
      .item-card.expanded {
        flex-direction: column;
      }

      .item-card.expanded .item-thumb {
        width: 100%;
        aspect-ratio: 16/10;
        border-right: none;
        border-bottom: 1px solid #f0f0f0;
        border-radius: 12px 12px 0 0;
      }

      .item-card.expanded .item-thumb img {
        padding: 20px;
      }

      .item-card.expanded .che-section { display: block; }
      .item-card.expanded .monitor-preview { display: flex; }
      .item-card.expanded .column-preview { display: flex; }
      .item-card.expanded .voice-preview-section { display: block; }
      .item-card.expanded .video-overlay { display: flex; }
      .item-card.expanded .media-indicators { display: flex; }

      .item-card.expanded .item-content {
        padding: 16px;
      }

      .item-card.expanded .item-name {
        font-size: 16px;
        -webkit-line-clamp: unset;
      }

      .item-card.expanded .item-price {
        font-size: 18px;
      }

      /* Expand toggle button */
      .expand-toggle {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 6px;
        width: 100%;
        padding: 10px;
        background: #f8f8f8;
        border: none;
        font-size: 11px;
        color: var(--ink-muted);
        cursor: pointer;
        border-top: 1px solid #eee;
        border-radius: 0 0 12px 12px;
      }

      .item-card:not(.expanded) .expand-toggle {
        border-radius: 0 0 12px 0;
      }

      .expand-toggle i {
        transition: transform 0.3s;
      }

      .item-card.expanded .expand-toggle i {
        transform: rotate(180deg);
      }

      .item-card.expanded .expand-toggle span::after {
        content: '收起';
      }

      .item-card:not(.expanded) .expand-toggle span::after {
        content: '查看詳情';
      }
    }

    .item-thumb {
      position: relative;
      aspect-ratio: 16/10;
      background: #fff;
      overflow: hidden;
      border-bottom: 1px solid #f0f0f0;
    }

    .item-thumb img {
      width: 100%;
      height: 100%;
      object-fit: contain;
      padding: 20px;
      transition: transform 0.4s;
    }

    .item-card:hover .item-thumb img { transform: scale(1.05); }

    .item-thumb-video .video-overlay {
      position: absolute;
      inset: 0;
      background: linear-gradient(to top, rgba(0,0,0,0.7) 0%, transparent 50%);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }

    .video-play-btn {
      width: 60px;
      height: 60px;
      background: rgba(255,255,255,0.95);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 8px 25px rgba(0,0,0,0.3);
    }

    .video-play-btn i { font-size: 20px; color: var(--accent); margin-left: 4px; }
    .video-label { margin-top: 10px; font-size: 12px; font-weight: 600; color: #fff; }

    .btn-like-float {
      position: absolute;
      top: 10px;
      right: 10px;
      width: 36px;
      height: 36px;
      border-radius: 50%;
      background: rgba(255,255,255,0.9);
      box-shadow: 0 4px 10px rgba(0,0,0,0.15);
      border: none;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      z-index: 10;
      color: #ccc;
      font-size: 18px;
      transition: all 0.2s;
    }

    .btn-like-float:hover { transform: scale(1.1); }
    .btn-like-float.active { color: var(--accent); }

    .item-label {
      position: absolute;
      top: 10px;
      left: 10px;
      font-size: 10px;
      font-weight: 700;
      padding: 4px 8px;
      border-radius: 4px;
      background: var(--accent);
      color: #fff;
    }

    .item-label.type-deal { background: #c4956a; }
    .item-label.type-exclusive { background: var(--blue); }
    .item-label.type-hot { background: #e74c3c; }

    .media-indicators {
      position: absolute;
      bottom: 10px;
      right: 10px;
      display: flex;
      gap: 4px;
    }

    .media-tag {
      font-size: 10px;
      font-weight: 700;
      color: #fff;
      background: rgba(0,0,0,0.7);
      padding: 4px 8px;
      border-radius: 4px;
      display: flex;
      align-items: center;
      gap: 4px;
    }

    .item-content {
      padding: 20px;
      display: flex;
      flex-direction: column;
      flex: 1;
    }

    .item-content-inner {
      flex: 1;
    }

    .item-name {
      font-size: 16px;
      font-weight: 700;
      color: var(--ink);
      margin-bottom: 8px;
      line-height: 1.4;
    }

    .item-price-row {
      display: flex;
      align-items: baseline;
      gap: 8px;
      margin-bottom: 16px;
      padding-bottom: 12px;
      border-bottom: 1px solid #f0f0f0;
    }

    .item-price { font-size: 18px; font-weight: 800; color: var(--ink); }

    .price-label {
      font-size: 10px;
      padding: 2px 6px;
      background: var(--accent);
      color: #fff;
      border-radius: 4px;
    }

    .che-section { margin-bottom: 20px; }

    .che-header {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 8px;
    }

    .che-face {
      width: 48px;
      height: 48px;
      border-radius: 50%;
      object-fit: cover;
      border: 2px solid var(--accent-soft);
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
    }

    .che-name { font-size: 13px; font-weight: 700; color: var(--ink); }

    .che-comment-box {
      background: var(--accent-soft);
      padding: 14px;
      border-radius: 0 12px 12px 12px;
      border-left: 3px solid var(--accent);
    }

    .che-text {
      font-size: 13px;
      color: var(--ink-light);
      line-height: 1.7;
      display: -webkit-box;
      -webkit-line-clamp: 3;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }

    .che-text.full-text {
      display: block;
      -webkit-line-clamp: unset;
      overflow: visible;
    }

    .che-text strong { color: var(--accent); }

    .monitor-preview {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 14px 16px;
      background: #f8f9fa;
      border: 1px solid #e8e8e8;
      border-radius: 12px;
      margin-bottom: 16px;
      transition: all 0.3s;
      position: relative;
    }

    .monitor-preview::before {
      content: '';
      position: absolute;
      left: 0;
      top: 0;
      bottom: 0;
      width: 3px;
      background: var(--accent);
      border-radius: 3px 0 0 3px;
    }

    /* Column Preview for Premium Plan */
    .column-preview {
      display: flex;
      align-items: center;
      gap: 14px;
      padding: 16px;
      background: linear-gradient(135deg, #f8f6f4 0%, #fff 100%);
      border: 1px solid #e8e8e8;
      border-radius: 12px;
      margin-bottom: 16px;
      text-decoration: none;
      transition: all 0.3s;
    }

    .column-preview:hover {
      border-color: var(--accent);
      box-shadow: 0 4px 12px rgba(212, 112, 122, 0.1);
    }

    .column-preview-icon {
      width: 48px;
      height: 48px;
      background: linear-gradient(135deg, var(--accent) 0%, #e8919a 100%);
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #fff;
      font-size: 18px;
      flex-shrink: 0;
    }

    .column-preview-content {
      flex: 1;
      min-width: 0;
    }

    .column-preview-label {
      font-size: 10px;
      color: var(--accent);
      font-weight: 600;
      letter-spacing: 0.05em;
      margin-bottom: 4px;
    }

    .column-preview-title {
      font-size: 13px;
      font-weight: 600;
      color: var(--ink);
      line-height: 1.4;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }

    .column-preview-arrow {
      color: var(--ink-faint);
      font-size: 14px;
    }

    .monitor-avatars { display: flex; }

    .monitor-avatar {
      width: 26px;
      height: 26px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 10px;
      font-weight: 600;
      color: #fff;
      margin-right: -8px;
      border: 2px solid #fff;
    }

    .monitor-count {
      flex: 1;
      font-size: 13px;
      font-weight: 600;
      color: var(--ink);
    }

    .monitor-arrow { font-size: 11px; color: var(--accent); }

    /* Voice Preview for Premium Plan */
    .voice-preview-section {
      margin-bottom: 16px;
    }

    .voice-preview-header {
      font-size: 11px;
      color: var(--ink-muted);
      margin-bottom: 10px;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .voice-preview-header i {
      color: var(--accent);
    }

    .voice-preview-card {
      background: #f9f9f9;
      border-radius: 10px;
      padding: 12px;
      margin-bottom: 8px;
      border-left: 3px solid var(--accent);
    }

    .voice-preview-card:last-child {
      margin-bottom: 0;
    }

    .voice-preview-top {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 8px;
    }

    .voice-preview-avatar {
      width: 24px;
      height: 24px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 10px;
      font-weight: 600;
      color: #fff;
    }

    .voice-preview-name {
      font-size: 11px;
      font-weight: 600;
      color: var(--ink);
    }

    .voice-preview-attr {
      font-size: 10px;
      color: var(--ink-muted);
    }

    .voice-preview-text {
      font-size: 12px;
      color: var(--ink-light);
      line-height: 1.6;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }

    .card-footer {
      display: flex;
      gap: 8px;
      margin-top: auto;
    }

    /* Original URL Link */
    .original-url-link {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      padding: 10px 14px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: #fff;
      text-decoration: none;
      border-radius: 8px;
      font-size: 11px;
      font-weight: 600;
      transition: all 0.3s;
      margin-bottom: 10px;
    }

    .original-url-link:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
    }

    .original-url-link i {
      font-size: 12px;
    }

    .btn-main {
      flex: 1;
      padding: 14px;
      border-radius: 10px;
      border: none;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      background: var(--ink);
      color: #fff;
      transition: all 0.2s;
    }

    .btn-main:hover { background: #333; transform: translateY(-2px); }

    .btn-badge {
      font-size: 9px;
      background: rgba(255,255,255,0.2);
      padding: 2px 6px;
      border-radius: 4px;
    }

    .btn-share {
      width: 44px;
      height: 44px;
      border-radius: 8px;
      border: 1px solid #e0e0e0;
      background: #fff;
      color: var(--ink-light);
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-size: 16px;
    }

    /* Expand toggle - hidden on PC */
    .expand-toggle {
      display: none;
    }

    /* === Sakura — 鄭老師的賞櫻購物筆記 === */

    .sakura-hero {
      position: relative;
      background: linear-gradient(160deg, #FFF7F8 0%, #FFEFF3 50%, #FFF5F0 100%);
      overflow: hidden;
      min-height: 480px;
    }
    .sakura-hero::before {
      content: ''; position: absolute; top: -60px; right: -60px;
      width: 240px; height: 240px; border-radius: 50%;
      background: radial-gradient(circle, rgba(212,96,122,0.08) 0%, transparent 70%);
      pointer-events: none;
    }

    .sakura-hero-inner {
      position: relative; z-index: 1;
      max-width: 1000px; margin: 0 auto;
      padding: 48px 24px 0;
    }

    /* LEFT: sensei — pinned to top-left via absolute */
    .sakura-hero-visual {
      position: absolute;
      top: 0; left: 0; bottom: 0;
      width: 38%;
      max-width: 380px;
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
      align-items: center;
      pointer-events: none;
      padding-top: 32px;
    }
    /* Speech bubble above photo */
    .sakura-speech {
      pointer-events: auto;
      background: #fff;
      border: 1px solid rgba(212,96,122,0.15);
      border-radius: 14px;
      padding: 10px 14px;
      font-size: 12px; line-height: 1.6;
      color: #2d2926;
      max-width: 280px;
      margin-bottom: 8px;
      box-shadow: 0 2px 12px rgba(212,96,122,0.08);
      position: relative;
      animation: skSpeechIn 0.4s ease-out;
    }
    @keyframes skSpeechIn { from{opacity:0;transform:translateY(6px)} to{opacity:1;transform:translateY(0)} }
    .sakura-speech::after {
      content: '';
      position: absolute; bottom: -7px; left: 50%;
      transform: translateX(-50%);
      width: 0; height: 0;
      border-left: 7px solid transparent;
      border-right: 7px solid transparent;
      border-top: 7px solid #fff;
      filter: drop-shadow(0 1px 1px rgba(212,96,122,0.1));
    }
    .sakura-speech-name {
      font-size: 10px; color: #C85070; font-weight: 700; margin-bottom: 3px;
    }
    .sakura-hero-cutout {
      width: 100%;
      display: block;
      filter: drop-shadow(4px 8px 20px rgba(0,0,0,0.06));
    }
    .sakura-hero-petal {
      position: absolute; font-size: 18px; opacity: 0.35;
      animation: skPetalFloat 4s ease-in-out infinite;
      pointer-events: none;
    }
    .sakura-hero-petal:nth-child(1) { top: 12%; left: 15%; animation-delay: 0s; }
    .sakura-hero-petal:nth-child(2) { top: 45%; left: 75%; animation-delay: 1.5s; font-size: 14px; }
    .sakura-hero-petal:nth-child(3) { top: 25%; left: 55%; animation-delay: 2.8s; font-size: 22px; opacity: 0.25; }
    @keyframes skPetalFloat {
      0%, 100% { transform: translateY(0) rotate(0deg); }
      50% { transform: translateY(-10px) rotate(15deg); }
    }

    /* RIGHT: text + picker — offset to right to avoid overlap with sensei */
    .sakura-hero-text {
      margin-left: 40%;
      padding-bottom: 48px;
      position: relative; z-index: 2;
    }

    .sakura-hero-label {
      display: inline-block;
      font-size: 10px; letter-spacing: 0.15em;
      padding: 5px 14px;
      background: #C85070; color: #fff;
      border-radius: 999px;
      margin-bottom: 14px;
    }
    .sakura-hero-sensei-tag {
      display: flex; align-items: center; gap: 8px;
      margin-bottom: 12px;
    }
    .sakura-hero-sensei-tag img {
      width: 34px; height: 34px; border-radius: 50%;
      border: 2.5px solid #fff; box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    .sakura-hero-sensei-tag span {
      font-size: 13px; font-weight: 600; color: #2d2926;
    }
    .sakura-hero h2 {
      font-family: 'Noto Serif TC', serif;
      font-size: clamp(1.3rem, 3.2vw, 1.75rem);
      font-weight: 700; line-height: 1.5;
      color: #2d2926;
      margin: 0 0 12px;
    }
    .sakura-hero h2 em {
      font-style: normal;
      background: linear-gradient(transparent 55%, rgba(212,96,122,0.25) 55%);
    }
    .sakura-hero-quote {
      font-size: 13.5px; line-height: 1.85;
      color: #5c5652;
      margin: 0 0 20px;
    }

    /* Date Picker */
    .sakura-hero-picker {
      background: #fff;
      border: 1px solid rgba(212,96,122,0.12);
      border-radius: 16px;
      padding: 18px 20px;
      box-shadow: 0 4px 20px rgba(212,96,122,0.06);
    }
    .sakura-hero-picker-title {
      font-size: 14px; font-weight: 700; color: #2d2926; margin: 0 0 3px;
    }
    .sakura-hero-picker-sub {
      font-size: 11px; color: #9a918a; margin: 0 0 12px;
    }
    .sakura-date-form {
      display: flex; flex-wrap: wrap; gap: 8px; align-items: center;
    }
    .sakura-date-wrap {
      display: flex; align-items: center; gap: 5px;
      background: #FAF8F5; border: 1px solid #eee;
      border-radius: 999px; padding: 3px 10px 3px 3px;
    }
    .sakura-date-input {
      width: 128px; padding: 8px 10px; border: none; border-radius: 999px;
      font-size: 13px; background: transparent; color: #2d2926;
    }
    .sakura-date-input:focus { outline: 2px solid #FFB7C5; background: #fff; }
    .sakura-date-label { font-size: 11px; color: #9a918a; }
    .sakura-date-btn {
      padding: 10px 22px; font-size: 13px; font-weight: 700;
      border: none; border-radius: 999px;
      background: linear-gradient(135deg, #C85070, #D4607A); color: #fff;
      cursor: pointer; transition: all 0.2s;
      box-shadow: 0 2px 8px rgba(200,80,112,0.3);
    }
    .sakura-date-btn:hover { transform: translateY(-1px); box-shadow: 0 4px 12px rgba(200,80,112,0.4); }
    .sakura-date-retry {
      display: none; margin-top: 12px; text-align: center;
    }
    .sakura-date-retry.is-visible { display: block; }
    .sakura-date-retry-btn {
      display: inline-flex; align-items: center; gap: 6px;
      padding: 10px 20px; font-size: 13px; font-weight: 600;
      border: 1.5px solid #C85070; border-radius: 999px;
      background: #fff; color: #C85070;
      cursor: pointer; transition: all 0.2s;
    }
    .sakura-date-retry-btn:hover { background: #FFF0F3; }

    /* Mobile: stack vertically, sensei becomes relative again */
    @media (max-width: 768px) {
      .sakura-hero { min-height: auto; }
      .sakura-hero-inner { padding: 0 20px; }
      .sakura-hero-visual {
        position: relative; bottom: auto; left: auto;
        width: 100%; max-width: none;
        display: flex; flex-direction: column;
        align-items: center; justify-content: flex-end;
        padding-top: 16px;
        pointer-events: auto;
      }
      .sakura-speech { max-width: 240px; font-size: 11px; }
      .sakura-hero-cutout {
        width: 55%; max-width: 240px;
      }
      .sakura-hero-text {
        margin-left: 0;
        padding: 20px 0 36px;
      }
      .sakura-hero h2 { font-size: 1.2rem; }
      .sakura-hero-quote { font-size: 13px; }
      .sakura-hero-picker { padding: 14px; }
      .sakura-date-input { width: 110px; font-size: 12px; }
      .sakura-hero-petal:nth-child(3) { display: none; }
    }
    @media (max-width: 420px) {
      .sakura-hero-cutout { width: 50%; max-width: 200px; }
    }

    /* -- Inline Result: 4-stage progress bar -- */
    .sakura-result-inline {
      display: none; margin-top: 14px;
      background: #fff;
      border: 1px solid rgba(212,96,122,0.15);
      border-radius: 14px;
      padding: 16px;
      animation: skFadeIn 0.35s ease-out;
    }
    .sakura-result-inline.is-visible { display: block; }
    @keyframes skFadeIn { from{opacity:0;transform:translateY(-4px)} to{opacity:1;transform:translateY(0)} }

    /* City + stage badge */
    .sk-result-head {
      display: flex; align-items: center; gap: 10px; margin-bottom: 8px;
    }
    .sk-result-icon { font-size: 1.2rem; }
    .sk-result-city { font-size: 16px; font-weight: 700; color: #2d2926; }
    .sk-result-badge {
      font-size: 9px; letter-spacing: 0.06em;
      padding: 2px 8px; border-radius: 999px;
      background: #C85070; color: #fff; font-weight: 700;
    }
    .sk-result-status {
      font-size: 12px; color: #6b635d; margin-bottom: 12px;
    }

    /* 4-stage progress bar */
    .sk-progress {
      position: relative;
      display: flex; justify-content: space-between;
      padding: 0 8px;
      margin-bottom: 6px;
    }
    .sk-progress::before {
      content: ''; position: absolute;
      top: 15px; left: 28px; right: 28px;
      height: 3px; background: #f0e8e4; border-radius: 2px;
    }
    .sk-progress-fill {
      position: absolute;
      top: 15px; left: 28px;
      height: 3px; background: linear-gradient(90deg, #F5A0B5, #C85070);
      border-radius: 2px;
      transition: width 0.6s ease-out;
    }
    .sk-stage {
      position: relative; z-index: 1;
      display: flex; flex-direction: column; align-items: center;
      gap: 6px; flex: 0 0 auto; width: 60px;
    }
    .sk-stage-dot {
      width: 32px; height: 32px; border-radius: 50%;
      display: flex; align-items: center; justify-content: center;
      font-size: 13px; font-weight: 700; color: #fff;
      transition: all 0.3s;
    }
    /* Color per stage */
    .sk-stage[data-stage="bloom"] .sk-stage-dot { background: #F5A0B5; }
    .sk-stage[data-stage="full"] .sk-stage-dot { background: #E87A9A; }
    .sk-stage[data-stage="fall"] .sk-stage-dot { background: #D4887C; }
    .sk-stage[data-stage="snow"] .sk-stage-dot { background: #B8A0C8; }
    .sk-stage.is-future .sk-stage-dot { background: #e8e4e0 !important; color: #b0a8a0; }
    .sk-stage.is-past .sk-stage-dot { opacity: 0.85; }
    .sk-stage.is-current .sk-stage-dot {
      box-shadow: 0 0 0 4px rgba(200,80,112,0.2);
      transform: scale(1.2);
    }
    .sk-stage-label {
      font-size: 10px; color: #9a918a; font-weight: 600;
      text-align: center;
    }
    .sk-stage.is-current .sk-stage-label { color: #C85070; font-weight: 700; }
    .sk-stage-date {
      font-size: 11px; color: #6b635d; font-weight: 600;
    }
    .sk-stage.is-current .sk-stage-date { color: #C85070; }

    /* Sensei comment below progress */
    .sk-result-sensei {
      display: flex; align-items: flex-start; gap: 8px;
      margin-top: 10px; padding: 10px;
      background: #FFF8F0; border-radius: 10px;
    }
    .sk-result-sensei img {
      width: 28px; height: 28px; border-radius: 50%; flex-shrink: 0; object-fit: cover;
    }
    .sk-result-sensei p {
      font-size: 11px; color: #2d2926; line-height: 1.5; margin: 0;
    }

    /* Retry link */
    .sk-result-retry {
      margin-top: 8px; text-align: center;
    }
    .sk-result-retry-btn {
      font-size: 12px; color: #C85070; font-weight: 600;
      background: none; border: none; cursor: pointer;
      text-decoration: underline; text-underline-offset: 3px;
    }
    .sk-result-retry-btn:hover { color: #b04060; }

    @media (max-width: 600px) {
      .sk-stage { width: 50px; }
      .sk-stage-dot { width: 28px; height: 28px; font-size: 12px; }
      .sk-stage-label { font-size: 9px; }
      .sk-stage-date { font-size: 10px; }
    }


    /* -- Below-banner detail section -- */
    .sakura-section {
      padding: 48px 20px;
      background: linear-gradient(180deg, #FFF5F0 0%, #FFF7F8 30%, #FFEFF3 100%);
    }
    .sakura-inner { max-width: 900px; margin: 0 auto; }
    .sakura-section-label {
      font-size: 10px; letter-spacing: 0.14em; text-transform: uppercase;
      color: #C85070; margin-bottom: 8px;
    }
    .sakura-section-title {
      font-family: 'Noto Serif TC', serif;
      font-size: 20px; font-weight: 700; color: #2d2926; margin: 0 0 24px;
    }

    /* Stages */
    .sakura-stages {
      display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px;
      margin-bottom: 24px;
    }
    .sakura-stage {
      background: #fff; border-radius: 12px; overflow: hidden;
      border: 1px solid #eee; transition: all 0.2s;
    }
    .sakura-stage:hover { box-shadow: 0 4px 16px rgba(0,0,0,0.08); transform: translateY(-2px); }
    .sakura-stage.is-highlight { border: 2px solid #C85070; }
    .sakura-stage-img { position: relative; aspect-ratio: 4/3; overflow: hidden; }
    .sakura-stage-img img { width:100%;height:100%;object-fit:cover;transition:transform 0.4s; }
    .sakura-stage:hover .sakura-stage-img img { transform: scale(1.05); }
    .sakura-stage-num {
      position: absolute; top: 8px; left: 8px;
      width: 24px; height: 24px; border-radius: 50%;
      background: #C85070; color: #fff;
      font-size: 11px; font-weight: 700;
      display: flex; align-items: center; justify-content: center;
    }
    .sakura-stage-body { padding: 12px; }
    .sakura-stage-name { font-size: 15px; font-weight: 700; margin: 0 0 2px; }
    .sakura-stage-sub { font-size: 11px; color: #9a918a; margin-bottom: 6px; }
    .sakura-stage-desc { font-size: 12px; color: #6b635d; line-height: 1.5; margin: 0 0 6px; }
    .sakura-stage-timing {
      display: inline-block; font-size: 10px; padding: 2px 8px;
      background: #FAF8F5; border-radius: 999px; color: #9a918a;
    }
    .sakura-stage-msg {
      margin-bottom: 24px; padding: 12px 16px;
      background: linear-gradient(90deg, #FFF0F3 0%, #FAF8F5 100%);
      border-left: 3px solid #C85070; border-radius: 0 12px 12px 0;
      font-size: 14px;
    }
    .sakura-stage-msg strong { color: #C85070; }

    @media (max-width: 768px) {
      .sakura-stages {
        display: flex; overflow-x: auto; scroll-snap-type: x mandatory;
        -webkit-overflow-scrolling: touch; gap: 12px;
        padding-bottom: 8px; margin: 0 -20px 24px; padding-left: 20px; padding-right: 20px;
      }
      .sakura-stage { flex: 0 0 70%; min-width: 220px; scroll-snap-align: start; }
    }

    /* City Grid */
    .sakura-grid {
      display: grid; grid-template-columns: repeat(4, 1fr);
      border: 1px solid #eee; background: #fff; border-radius: 12px; overflow: hidden;
    }
    .sakura-city {
      padding: 20px 12px; text-align: center;
      border-right: 1px solid #eee; position: relative;
    }
    .sakura-city:last-child { border-right: none; }
    .bloom-status { display:inline-block;font-size:9px;font-weight:700;padding:2px 8px;border-radius:10px;margin-bottom:8px; }
    .status-upcoming { background: #FFF0E6; color: #E08A4A; }
    .status-blooming { background: #FFE8EC; color: #C85070; }
    .status-full { background: #FFEBF0; color: #D4507A; }
    .status-done { background: #f0f0f0; color: #999; }
    .status-waiting { background: #E8F4FF; color: #5B8DB8; }
    .sakura-city .name { font-size:14px;font-weight:700;margin-bottom:4px; }
    .sakura-city .bloom-label { font-size:10px;color:#9a918a; }
    .sakura-city .bloom-date { font-size:20px;font-weight:700;color:#C85070; }
    .sakura-city .full { font-size:12px;color:#9a918a;margin-top:6px; }
    .sakura-city .full strong { color:#2d2926; }
    .city-tip { font-size:10px;color:#9a918a;margin-top:10px;line-height:1.4; }
    .city-sub { font-size: 11px; color: #9a918a; margin-top: 4px; }
    .sakura-footer {
      margin-top:20px;display:flex;justify-content:space-between;
      align-items:center;flex-wrap:wrap;gap:12px;
    }
    .sakura-source { font-size:11px;color:#9a918a; }
    .sakura-source a { color:#9a918a; }
    .sakura-tip {
      display:inline-flex;align-items:center;gap:8px;
      background:#f8f8f8;padding:10px 16px;font-size:13px;color:#6b635d;
    }
    .sakura-tip strong { color:#2d2926; }
    @media (max-width: 768px) {
      .sakura-grid { grid-template-columns: repeat(2, 1fr); }
      .sakura-city { padding: 16px 10px; }
      .sakura-city:nth-child(even) { border-right: none; }
      .sakura-city:last-child:nth-child(odd) { grid-column: span 2; }
      .city-tip { font-size: 9px; }
    }

    /* Season ended */
    .sakura-ended { text-align:center;padding:40px 20px; }
    .sakura-ended-emoji { font-size:48px;margin-bottom:12px; }
    .sakura-ended-title { font-size:18px;font-weight:700;margin:0 0 8px; }
    .sakura-ended-text { font-size:13px;color:#9a918a;margin:0 0 16px;line-height:1.6; }

    /* === Store Guide === */
    /* === Store Guide (Tabbed v2) === */
    .store-guide { padding: 48px 20px; background: #FAF8F5; }
    .sg-inner { max-width: 680px; margin: 0 auto; }
    .sg-header { text-align: center; margin-bottom: 20px; }
    .sg-header h2 { font-size: 22px; font-weight: 700; color: var(--ink); }
    .sg-header p { font-size: 13px; color: var(--ink-muted); margin-top: 4px; }

    .sg-tabs {
      display: flex; gap: 6px; margin-bottom: 20px;
      overflow-x: auto; scrollbar-width: none;
    }
    .sg-tabs::-webkit-scrollbar { display: none; }
    .sg-tab {
      flex-shrink: 0; padding: 9px 16px;
      font-size: 12px; font-weight: 600;
      border: 1.5px solid #e0dbd6; border-radius: 999px;
      background: #fff; color: #6b635d;
      cursor: pointer; transition: all 0.2s; white-space: nowrap;
    }
    .sg-tab:hover { border-color: #C85070; color: #C85070; }
    .sg-tab.is-active { background: #C85070; color: #fff; border-color: #C85070; }

    .sg-panel { display: none; animation: sgFadeIn 0.3s ease-out; }
    .sg-panel.is-active { display: block; }
    @keyframes sgFadeIn { from{opacity:0;transform:translateY(4px)} to{opacity:1;transform:translateY(0)} }

    /* === Tab 1: Steps === */


    /* === Tab 1: Tax Free Card === */
    .sg-tax-card {
      background: #fff; border-radius: 14px; overflow: hidden;
      box-shadow: 0 2px 10px rgba(0,0,0,0.04);
      margin-bottom: 14px;
    }
    .sg-tax-img {
      height: 160px; background-size: cover; background-position: center;
      position: relative; display: flex; align-items: center; justify-content: center;
    }
    .sg-tax-overlay {
      text-align: center; color: #fff;
      text-shadow: 0 2px 8px rgba(0,0,0,0.3);
    }
    .sg-tax-big { font-size: 36px; font-weight: 800; letter-spacing: 0.05em; }
    .sg-tax-sub { font-size: 13px; font-weight: 600; letter-spacing: 0.15em; opacity: 0.9; }
    .sg-tax-body { padding: 18px; }
    .sg-tax-title { font-size: 15px; font-weight: 700; color: #2d2926; margin-bottom: 8px; }
    .sg-tax-desc { font-size: 12px; color: #6b635d; line-height: 1.7; margin-bottom: 16px; }
    .sg-tax-desc strong { color: #C85070; }
    .sg-tax-facts {
      display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px;
      margin-bottom: 16px;
    }
    .sg-tax-fact {
      text-align: center; padding: 12px 6px;
      background: #FFF8F5; border-radius: 10px;
    }
    .sg-tax-fact-num { font-size: 20px; font-weight: 800; color: #C85070; line-height: 1.3; }
    .sg-tax-fact-text { font-size: 10px; color: #6b635d; margin-top: 4px; line-height: 1.4; }
    .sg-tax-alert {
      padding: 14px; background: #FFF5E6; border-radius: 10px;
      border-left: 3px solid #E08A4A;
    }
    .sg-tax-alert-badge {
      font-size: 11px; font-weight: 700; color: #E08A4A; margin-bottom: 6px;
    }
    .sg-tax-alert p {
      font-size: 12px; color: #6b635d; line-height: 1.65; margin: 0;
    }
    .sg-tax-alert strong { color: #E08A4A; }

    /* Sensei tip (shared) */
    .sg-sensei-tip {
      display: flex; align-items: flex-start; gap: 10px;
      padding: 12px; background: #FFF8F0; border-radius: 10px;
    }
    .sg-sensei-tip img {
      width: 32px; height: 32px; border-radius: 50%; object-fit: cover; flex-shrink: 0;
    }
    .sg-sensei-tip p { font-size: 12px; color: #2d2926; line-height: 1.6; margin: 0; }

    /* === Tab 2: Store Cards (large image) === */
    .sg-stores-list { display: flex; flex-direction: column; gap: 16px; }
    .sg-store-card {
      background: #fff; border-radius: 14px; overflow: hidden;
      box-shadow: 0 2px 10px rgba(0,0,0,0.04);
    }
    .sg-store-hero {
      height: 200px; background-size: cover; background-position: center;
      position: relative;
    }
    .sg-store-badge {
      position: absolute; top: 12px; left: 12px;
      font-size: 10px; font-weight: 700;
      padding: 4px 12px; border-radius: 999px;
      background: rgba(200,80,112,0.9); color: #fff;
      backdrop-filter: blur(4px);
    }
    .sg-store-body { padding: 16px 18px; }
    .sg-store-name-row { display: flex; align-items: baseline; gap: 8px; margin-bottom: 6px; }
    .sg-store-name-row h3 { font-size: 17px; font-weight: 700; color: #2d2926; margin: 0; }
    .sg-store-jp { font-size: 11px; color: #9a918a; }
    .sg-store-desc {
      font-size: 12px; color: #6b635d; line-height: 1.65; margin: 0 0 10px;
    }
    .sg-store-highlights {
      display: flex; flex-wrap: wrap; gap: 6px; margin-bottom: 10px;
    }
    .sg-store-highlights span {
      font-size: 10px; padding: 3px 8px;
      background: #FFF0F3; color: #C85070; font-weight: 600;
      border-radius: 6px;
    }
    .sg-store-sensei {
      font-size: 11px; color: #6b635d; line-height: 1.6;
      padding: 10px 12px; background: #FFF8F0; border-radius: 8px;
    }

    /* === Tab 3: Coupon === */
    .sg-coupon-card {
      background: #fff; border-radius: 14px; overflow: hidden;
      border: 2px solid #C85070;
      box-shadow: 0 4px 20px rgba(200,80,112,0.1);
    }
    .sg-coupon-flag {
      background: #C85070; color: #fff;
      font-size: 12px; font-weight: 700;
      padding: 8px 16px; text-align: center;
    }
    .sg-coupon-hero { text-align: center; padding: 16px 16px 0; }
    .sg-coupon-img {
      max-width: 100%; border-radius: 8px;
      box-shadow: 0 2px 12px rgba(0,0,0,0.08);
      max-height: 400px; object-fit: contain;
    }
    .sg-coupon-body { padding: 16px 18px; }
    .sg-coupon-title { font-size: 18px; font-weight: 700; color: #2d2926; }
    .sg-coupon-sub { font-size: 12px; color: #C85070; font-weight: 600; margin-bottom: 12px; }
    .sg-coupon-rates { display: flex; flex-direction: column; gap: 6px; margin-bottom: 12px; }
    .sg-rate {
      display: flex; justify-content: space-between; align-items: center;
      padding: 8px 10px; background: #FFF8F5; border-radius: 8px;
      font-size: 12px; color: #6b635d;
    }
    .sg-rate strong { color: #C85070; font-size: 13px; }
    .sg-coupon-expire { font-size: 10px; color: #9a918a; text-align: center; margin-bottom: 8px; }
    .sg-coupon-save-note {
      text-align: center; font-size: 12px; font-weight: 600;
      color: #C85070; margin-bottom: 12px;
    }

    @media (max-width: 768px) {
      .sg-store-hero { height: 180px; }
      .sg-coupon-card { margin: 0 -4px; }
    }

    /* === Outro === */
    .outro-section {
      padding: 80px 24px;
      background: var(--white);
    }

    .outro-inner { max-width: 900px; margin: 0 auto; }

    .related-articles { margin-bottom: 60px; }

    .related-header {
      text-align: center;
      margin-bottom: 32px;
    }

    .related-header h2 {
      font-family: 'Noto Serif TC', 'Noto Serif JP', serif;
      font-size: 20px;
      font-weight: 500;
      color: var(--ink);
      margin-bottom: 6px;
    }

    .related-header p { font-size: 13px; color: var(--ink-muted); }

    .articles-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 20px;
    }

    .article-card {
      background: var(--paper-warm);
      overflow: hidden;
      text-decoration: none;
      transition: box-shadow 0.3s;
    }

    .article-card:hover { box-shadow: 0 8px 30px rgba(0,0,0,0.08); }

    .article-img {
      height: 140px;
      background-size: cover;
      background-position: center;
      position: relative;
    }

    .article-category {
      position: absolute;
      top: 10px;
      left: 10px;
      background: var(--accent);
      color: #fff;
      padding: 4px 10px;
      font-size: 10px;
    }

    .article-body { padding: 16px; }

    .article-title {
      font-size: 13px;
      font-weight: 500;
      color: var(--ink);
      margin-bottom: 8px;
      line-height: 1.5;
    }

    .article-meta { font-size: 11px; color: var(--ink-muted); }

    @media (max-width: 700px) {
      .articles-grid { grid-template-columns: 1fr; }
    }

    .outro-cta {
      text-align: center;
      padding: 40px;
      background: var(--paper-warm);
    }

    .outro-greeting {
      font-family: 'Noto Serif TC', 'Noto Serif JP', serif;
      font-size: 18px;
      color: var(--ink);
      margin-bottom: 8px;
    }

    .outro-text {
      font-size: 13px;
      color: var(--ink-light);
      margin-bottom: 20px;
    }

    .outro-follow { margin-top: 24px; }
    .follow-label { font-size: 12px; color: var(--ink-muted); margin-bottom: 12px; }

    .follow-buttons {
      display: flex;
      justify-content: center;
      gap: 10px;
    }

    .follow-buttons a {
      width: 48px;
      height: 48px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #fff;
      font-size: 20px;
      border-radius: 12px;
      transition: transform 0.2s;
    }

    .follow-buttons a:nth-child(1) { background: #1877F2; }
    .follow-buttons a:nth-child(2) { background: linear-gradient(45deg, #f09433, #e6683c, #dc2743, #cc2366, #bc1888); }
    .follow-buttons a:nth-child(3) { background: #06C755; }
    .follow-buttons a:hover { transform: translateY(-3px); box-shadow: 0 4px 12px rgba(0,0,0,0.15); }

    /* Card hint divider */
    .hint-divider {
      color: var(--ink-faint);
      margin: 0 4px;
    }

    /* Onboarding tooltip */
    .onboarding-tip {
      position: fixed;
      bottom: 90px;
      left: 50%;
      transform: translateX(-50%);
      z-index: 998;
      animation: onboard-in 0.5s ease-out;
      display: none;
    }
    .onboarding-tip.show {
      display: block;
    }
    .onboarding-tip-inner {
      background: #fff;
      border-radius: 16px;
      padding: 16px 20px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.15), 0 0 0 1px rgba(212,112,122,0.2);
      display: flex;
      align-items: center;
      gap: 14px;
      max-width: 380px;
    }
    .onboarding-face {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      object-fit: cover;
      border: 2px solid var(--accent-soft);
      flex-shrink: 0;
    }
    .onboarding-content p {
      font-size: 13px;
      line-height: 1.6;
      color: var(--ink-light);
      margin: 0;
    }
    .onboarding-content strong {
      color: var(--accent);
    }
    .onboarding-close {
      background: none;
      border: none;
      font-size: 16px;
      color: var(--ink-muted);
      cursor: pointer;
      padding: 4px;
      flex-shrink: 0;
      align-self: flex-start;
    }
    @keyframes onboard-in {
      from { opacity: 0; transform: translateX(-50%) translateY(20px); }
      to { opacity: 1; transform: translateX(-50%) translateY(0); }
    }
    @media (max-width: 480px) {
      .onboarding-tip { left: 16px; right: 16px; transform: none; }
      .onboarding-tip-inner { max-width: 100%; }
      @keyframes onboard-in {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
      }
    }

    /* Sticky Bar === */
    .sticky-bar {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: rgba(255,255,255,0.98);
      backdrop-filter: blur(10px);
      border-top: 1px solid #eee;
      padding: 12px 20px;
      z-index: 1000;
      transform: translateY(100%);
      transition: transform 0.3s;
      padding-bottom: calc(12px + env(safe-area-inset-bottom, 0));
    }

    .sticky-bar.visible { transform: translateY(0); }

    @media (max-width: 768px) {
      .sticky-bar { transform: translateY(0); }
    }

    .sticky-inner {
      max-width: 600px;
      margin: 0 auto;
      display: flex;
      align-items: center;
      gap: 16px;
    }

    .sticky-info { flex: 1; }

    .sticky-count {
      font-weight: 600;
      color: var(--ink);
      font-size: 14px;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .sticky-count i { color: var(--accent); }
    .sticky-hint { font-size: 11px; color: var(--ink-muted); }

    .sticky-btn {
      background: var(--ink);
      color: #fff;
      border: none;
      padding: 12px 24px;
      font-size: 13px;
      font-weight: 500;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    /* === Footer === */
    .footer {
      background: var(--ink);
      color: #fff;
      padding: 50px 24px 30px;
    }

    .footer-inner { max-width: 900px; margin: 0 auto; }

    .footer-top {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 30px;
      flex-wrap: wrap;
      gap: 20px;
    }

    .footer-collab {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .footer-collab img {
      height: 20px;
      filter: brightness(0) invert(1);
    }

    .footer-collab > span { opacity: 0.4; }

    .footer-links {
      display: flex;
      gap: 24px;
      flex-wrap: wrap;
    }

    .footer-links a {
      color: rgba(255,255,255,0.6);
      text-decoration: none;
      font-size: 12px;
    }

    .footer-bottom {
      border-top: 1px solid rgba(255,255,255,0.1);
      padding-top: 24px;
      text-align: center;
      font-size: 11px;
      opacity: 0.4;
    }

    /* === PC Modal === */
    .modal-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.6);
      backdrop-filter: blur(4px);
      z-index: 2000;
      display: none;
      align-items: center;
      justify-content: center;
      padding: 20px;
      opacity: 0;
      transition: opacity 0.3s;
    }

    .modal-overlay.active {
      display: flex;
      opacity: 1;
    }

    .detail-modal {
      background: var(--white);
      max-width: 560px;
      width: 100%;
      max-height: 90vh;
      overflow-y: auto;
      position: relative;
      border-radius: 16px;
    }

    .modal-close {
      position: absolute;
      top: 12px;
      right: 12px;
      background: rgba(255,255,255,0.9);
      border: none;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      cursor: pointer;
      color: var(--ink-light);
      z-index: 10;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 16px;
    }

    .modal-visual {
      position: relative;
      background: #fff;
      aspect-ratio: 16/10;
      display: flex;
      align-items: center;
      justify-content: center;
      border-bottom: 1px solid #f0f0f0;
    }

    .modal-visual.has-video {
      aspect-ratio: 16/9;
      background: #000;
    }

    .modal-visual iframe {
      width: 100%;
      height: 100%;
      border: none;
    }

    .modal-product-img {
      max-width: 100%;
      max-height: 100%;
      object-fit: contain;
      padding: 20px;
    }

    .modal-body { padding: 24px; }

    .modal-product-name {
      font-family: 'Noto Serif TC', 'Noto Serif JP', serif;
      font-size: 18px;
      font-weight: 600;
      color: var(--ink);
      margin-bottom: 6px;
    }

    .modal-product-price {
      font-size: 20px;
      font-weight: 700;
      color: var(--ink);
      margin-bottom: 20px;
    }

    .modal-tei-voice {
      background: var(--paper-warm);
      padding: 16px;
      margin-bottom: 20px;
      border-radius: 12px;
    }

    .tei-voice-head {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 10px;
    }

    .tei-voice-head img {
      width: 52px;
      height: 52px;
      border-radius: 50%;
      object-fit: cover;
      border: 2px solid var(--accent-soft);
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
    }

    .tei-voice-meta { flex: 1; }
    .tei-voice-name { font-size: 14px; font-weight: 700; color: var(--ink); }
    .tei-voice-title { font-size: 11px; color: var(--ink-muted); }

    .tei-voice-text {
      font-size: 13px;
      color: var(--ink-light);
      line-height: 1.8;
    }

    .tei-voice-text strong { color: var(--accent); }

    /* User Voices */
    .modal-voices {
      margin-bottom: 20px;
      background: #f8f9fa;
      border-radius: 12px;
      padding: 20px;
    }

    .modal-voices-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 16px;
      padding-bottom: 12px;
      border-bottom: 1px solid #e5e5e5;
    }

    .modal-voices-label {
      font-size: 15px;
      font-weight: 700;
      color: var(--ink);
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .modal-voices-label::before {
      content: '💬';
      font-size: 18px;
    }

    .modal-voices-count {
      font-size: 13px;
      color: var(--accent);
      font-weight: 600;
    }

    .modal-voices-list {
      display: flex;
      flex-direction: column;
      gap: 12px;
      max-height: 400px;
      overflow-y: auto;
    }

    .modal-voice-card {
      background: #fff;
      padding: 16px;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
      border: 1px solid #eee;
    }

    .modal-voice-top {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 10px;
    }

    .modal-voice-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
      font-weight: 600;
      color: #fff;
    }

    .modal-voice-info { flex: 1; }
    .modal-voice-name { font-size: 14px; font-weight: 600; color: var(--ink); }
    .modal-voice-attr { font-size: 11px; color: var(--ink-muted); }

    .modal-voice-text {
      font-size: 14px;
      color: var(--ink-light);
      line-height: 1.7;
      margin-bottom: 12px;
    }

    .modal-voice-footer {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding-top: 10px;
      border-top: 1px dashed #e5e5e5;
    }

    .modal-voice-date {
      font-size: 11px;
      color: var(--ink-muted);
    }

    .sns-link-btn {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 12px;
      background: linear-gradient(135deg, #E1306C 0%, #F77737 100%);
      color: #fff;
      text-decoration: none;
      border-radius: 20px;
      font-size: 11px;
      font-weight: 600;
      transition: all 0.3s;
    }

    .sns-link-btn:hover {
      transform: scale(1.05);
      box-shadow: 0 4px 12px rgba(212, 112, 122, 0.3);
    }

    .modal-actions {
      display: flex;
      gap: 10px;
      margin-bottom: 12px;
    }

    .modal-official-btn {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      padding: 14px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: #fff;
      text-decoration: none;
      border-radius: 10px;
      font-size: 13px;
      font-weight: 600;
      transition: all 0.3s;
    }

    .modal-official-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
    }

    .modal-line-btn {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      padding: 14px 20px;
      background: #06C755;
      color: #fff;
      border: none;
      border-radius: 10px;
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
    }

    .modal-line-btn:hover {
      background: #05b34c;
      transform: translateY(-2px);
    }

    .modal-heart-btn {
      width: 50px;
      height: 50px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #fff;
      border: 2px solid #e5e5e5;
      border-radius: 10px;
      font-size: 20px;
      color: #ccc;
      cursor: pointer;
      transition: all 0.3s;
    }

    .modal-heart-btn:hover {
      border-color: var(--accent);
      color: var(--accent);
    }

    .modal-heart-btn.active {
      background: var(--accent);
      border-color: var(--accent);
      color: #fff;
    }

    .modal-heart-btn.active i {
      font-weight: 900;
    }

    .modal-add-btn {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      width: 100%;
      background: var(--white);
      border: 1px solid var(--ink-faint);
      color: var(--ink);
      padding: 14px;
      font-size: 13px;
      font-weight: 500;
      cursor: pointer;
      border-radius: 8px;
    }

    .modal-add-btn.added {
      background: var(--accent);
      border-color: var(--accent);
      color: #fff;
    }

    .modal-cta {
      display: block;
      width: 100%;
      background: var(--ink);
      color: #fff;
      border: none;
      padding: 16px;
      font-size: 13px;
      font-weight: 500;
      text-align: center;
      text-decoration: none;
      border-radius: 8px;
    }

    /* === Mobile Bottom Sheet === */
    .bottomsheet-overlay {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.4);
      z-index: 1001;
    }

    @media (max-width: 768px) {
      .bottomsheet-overlay.is-open { display: block; }
    }

    .bottomsheet {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: var(--white);
      border-radius: 16px 16px 0 0;
      max-height: 92vh;
      transform: translateY(100%);
      transition: transform 0.3s cubic-bezier(0.32, 0.72, 0, 1);
      z-index: 1002;
      display: flex;
      flex-direction: column;
      padding-bottom: env(safe-area-inset-bottom, 0);
    }

    .bottomsheet-overlay.is-open .bottomsheet {
      transform: translateY(0);
    }

    .bs-handle {
      padding: 12px;
      display: flex;
      justify-content: center;
    }

    .bs-handle-bar {
      width: 36px;
      height: 4px;
      background: #ddd;
      border-radius: 2px;
    }

    .bs-product-visual {
      position: relative;
      aspect-ratio: 16/10;
      background: #fff;
      border-bottom: 1px solid #f0f0f0;
      overflow: hidden;
    }

    .bs-product-visual.has-video {
      aspect-ratio: 16/9;
      background: #000;
    }

    .bs-product-visual img {
      width: 100%;
      height: 100%;
      object-fit: contain;
      padding: 20px;
    }

    .bs-product-visual iframe {
      width: 100%;
      height: 100%;
      border: none;
    }

    .bs-product-info-bar {
      padding: 16px 20px;
      border-bottom: 1px solid #f0f0f0;
    }

    .bs-product-name {
      font-size: 16px;
      font-weight: 700;
      color: var(--ink);
      margin-bottom: 4px;
    }

    .bs-product-price {
      font-size: 18px;
      font-weight: 700;
      color: var(--ink);
    }

    .bs-content {
      flex: 1;
      overflow-y: auto;
      padding: 20px;
      -webkit-overflow-scrolling: touch;
    }

    .bs-tei-voice {
      background: var(--paper-warm);
      padding: 14px;
      margin-bottom: 16px;
      border-radius: 12px;
    }

    .bs-voices {
      margin-bottom: 16px;
      background: #f8f9fa;
      border-radius: 12px;
      padding: 16px;
    }

    .bs-voices-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 14px;
      padding-bottom: 10px;
      border-bottom: 1px solid #e5e5e5;
    }

    .bs-voices-label {
      font-size: 14px;
      font-weight: 700;
      color: var(--ink);
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .bs-voices-label::before {
      content: '💬';
      font-size: 16px;
    }

    .bs-voices-count {
      font-size: 12px;
      color: var(--accent);
      font-weight: 600;
    }

    .bs-voice-list {
      display: flex;
      flex-direction: column;
      gap: 10px;
      max-height: 350px;
      overflow-y: auto;
    }

    .bs-voice-card {
      background: #fff;
      padding: 14px;
      border-radius: 10px;
      border: 1px solid #eee;
    }

    .bs-voice-top {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 8px;
    }

    .bs-voice-avatar {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 13px;
      font-weight: 600;
      color: #fff;
    }

    .bs-voice-info { flex: 1; }
    .bs-voice-name { font-size: 13px; font-weight: 600; color: var(--ink); }
    .bs-voice-attr { font-size: 10px; color: var(--ink-muted); }

    .bs-voice-text {
      font-size: 13px;
      color: var(--ink-light);
      line-height: 1.7;
      margin-bottom: 10px;
    }

    .bs-voice-footer {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding-top: 8px;
      border-top: 1px dashed #e5e5e5;
    }

    .bs-voice-date {
      font-size: 10px;
      color: var(--ink-muted);
    }

    .bs-sns-link {
      display: inline-flex;
      align-items: center;
      gap: 5px;
      padding: 5px 10px;
      background: linear-gradient(135deg, #E1306C 0%, #F77737 100%);
      color: #fff;
      text-decoration: none;
      border-radius: 16px;
      font-size: 10px;
      font-weight: 600;
    }

    .bs-column-link {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 14px;
      background: #f5f4f2;
      text-decoration: none;
      margin-bottom: 16px;
      border-radius: 10px;
    }

    .bs-column-icon {
      width: 40px;
      height: 40px;
      background: var(--paper);
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--ink-light);
      border-radius: 8px;
    }

    .bs-column-text { flex: 1; }
    .bs-column-label { font-size: 10px; color: var(--ink-muted); }
    .bs-column-title { font-size: 13px; color: var(--ink); font-weight: 500; }
    .bs-column-arrow { color: var(--ink-faint); }

    .bs-actions {
      display: flex;
      gap: 10px;
      padding: 16px 20px;
      border-top: 1px solid #f0f0f0;
      background: var(--white);
      padding-bottom: calc(16px + env(safe-area-inset-bottom, 0));
    }

    .bs-official-btn {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      padding: 14px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: #fff;
      text-decoration: none;
      border-radius: 10px;
      font-size: 13px;
      font-weight: 600;
    }

    .bs-line-btn {
      width: 50px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #06C755;
      color: #fff;
      border: none;
      border-radius: 10px;
      font-size: 20px;
      cursor: pointer;
    }

    .bs-heart-btn {
      width: 50px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #fff;
      border: 2px solid #e5e5e5;
      border-radius: 10px;
      font-size: 20px;
      color: #ccc;
      cursor: pointer;
    }

    .bs-heart-btn.active {
      background: var(--accent);
      border-color: var(--accent);
      color: #fff;
    }

    .bs-action {
      flex: 1;
      padding: 14px;
      border: none;
      font-size: 13px;
      font-weight: 500;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      border-radius: 8px;
    }

    .bs-action.primary { background: var(--ink); color: #fff; }
    .bs-action.primary.is-active { background: var(--accent); }
    .bs-action.secondary { background: #f5f5f5; color: var(--ink); }

    /* List Modal */
    .list-modal {
      background: var(--white);
      max-width: 400px;
      width: 100%;
      max-height: 80vh;
      overflow: hidden;
      border-radius: 16px;
    }

    .list-header {
      padding: 20px 24px;
      border-bottom: 1px solid #eee;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .list-header h3 { font-size: 15px; font-weight: 600; color: var(--ink); }

    .list-items {
      padding: 16px 24px;
      max-height: 50vh;
      overflow-y: auto;
    }

    .list-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px;
      background: #f8f8f8;
      margin-bottom: 10px;
      border-radius: 8px;
    }

    .list-item-img { width: 48px; height: 48px; object-fit: cover; }
    .list-item-info { flex: 1; }
    .list-item-info h4 { font-size: 13px; font-weight: 500; color: var(--ink); }
    .list-item-info p { font-size: 12px; color: var(--accent); font-weight: 600; }

    .list-item-remove {
      background: none;
      border: none;
      color: var(--ink-muted);
      cursor: pointer;
    }

    .list-empty {
      text-align: center;
      padding: 40px;
      color: var(--ink-muted);
    }

    .list-empty i { font-size: 32px; margin-bottom: 12px; color: var(--ink-faint); display: block; }

    /* Screenshot tip in list modal */
    .list-screenshot-tip {
      padding: 12px 24px;
      background: #FFF8F0;
      border-top: 1px solid #f0e8e0;
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 12px;
      color: var(--ink-light);
    }
    .list-screenshot-tip i {
      color: var(--accent);
      font-size: 16px;
      flex-shrink: 0;
    }

    .list-footer {
      padding: 16px 24px;
      border-top: 1px solid #eee;
      display: flex;
      gap: 10px;
    }

    .share-btn {
      flex: 1;
      padding: 12px;
      border: none;
      font-size: 12px;
      font-weight: 500;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      border-radius: 8px;
    }

    .share-btn.line { background: #06C755; color: white; }
    .share-btn.copy { background: #f0f0f0; color: var(--ink); }

    /* Toast */
    .toast {
      position: fixed;
      bottom: 100px;
      left: 50%;
      transform: translateX(-50%) translateY(20px);
      background: var(--ink);
      color: white;
      padding: 14px 24px;
      font-size: 13px;
      z-index: 9999;
      opacity: 0;
      transition: all 0.3s;
      pointer-events: none;
      border-radius: 8px;
    }

    .toast.show {
      opacity: 1;
      transform: translateX(-50%) translateY(0);
    }

    .toast i { color: #6fcf97; margin-right: 8px; }

    /* Scroll fade-in animation */
    .fade-section {
      opacity: 0;
      transform: translateY(30px);
      transition: opacity 0.8s ease, transform 0.8s ease;
    }
    .fade-section.is-visible {
      opacity: 1;
      transform: translateY(0);
    }

    /* Trust Signal Bar */
    .trust-bar {
      background: var(--ink);
      color: #fff;
      padding: 16px 24px;
      text-align: center;
      font-size: 13px;
      letter-spacing: 0.05em;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 24px;
      flex-wrap: wrap;
    }
    .trust-item {
      display: flex;
      align-items: center;
      gap: 8px;
      white-space: nowrap;
    }
    .trust-item i { color: var(--sakura); font-size: 14px; }
    .trust-item strong { font-weight: 700; }
    @media (max-width: 600px) {
      .trust-bar { gap: 12px; font-size: 11px; padding: 12px 16px; }
      .trust-item { gap: 5px; }
    }

    /* Tei Credential Badge */
    .tei-credential-badge {
      position: absolute;
      top: 20px;
      right: 10px;
      background: linear-gradient(135deg, var(--accent), #c45d67);
      color: #fff;
      font-size: 12px;
      font-weight: 700;
      padding: 8px 16px;
      border-radius: 25px;
      letter-spacing: 0.05em;
      box-shadow: 0 4px 15px rgba(212, 112, 122, 0.4);
      z-index: 5;
      display: flex;
      align-items: center;
      gap: 6px;
    }
    .tei-credential-badge i { font-size: 14px; }
    @media (max-width: 900px) {
      .tei-credential-badge { font-size: 11px; padding: 6px 12px; top: 10px; right: 5px; }
    }

    /* Back to top button */
    .back-to-top {
      position: fixed;
      bottom: 90px;
      right: 20px;
      width: 44px;
      height: 44px;
      background: var(--accent);
      color: #fff;
      border: none;
      border-radius: 50%;
      font-size: 18px;
      cursor: pointer;
      box-shadow: 0 4px 15px rgba(212, 112, 122, 0.4);
      z-index: 999;
      opacity: 0;
      transform: translateY(10px);
      transition: all 0.3s;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .back-to-top.visible {
      opacity: 1;
      transform: translateY(0);
    }
    .back-to-top:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 20px rgba(212, 112, 122, 0.5);
    }
    @media (max-width: 768px) {
      .back-to-top { bottom: calc(90px + env(safe-area-inset-bottom, 0)); right: 16px; width: 40px; height: 40px; font-size: 16px; }
    }

    /* Shopping decorations */
    .hero-deco {
      position: absolute;
      z-index: 1;
      opacity: 0.07;
      pointer-events: none;
      font-size: 120px;
      color: var(--accent);
    }
    .hero-deco.deco-bag { top: 15%; left: 5%; transform: rotate(-15deg); }
    .hero-deco.deco-cart { bottom: 20%; right: 8%; transform: rotate(10deg); }
    .hero-deco.deco-tag { top: 60%; left: 12%; transform: rotate(5deg); font-size: 80px; }
    @media (max-width: 900px) {
      .hero-deco { font-size: 60px; opacity: 0.05; }
      .hero-deco.deco-tag { font-size: 40px; }
    }

    /* Sakura photo background with crossfade */
    .hero::after {
      content: '';
      position: absolute;
      top: 0;
      right: 0;
      width: 55%;
      height: 100%;
      background: url('https://images.unsplash.com/photo-1522383225653-ed111181a951?w=1200&q=60') center/cover no-repeat;
      mask-image: linear-gradient(to right, transparent 0%, rgba(0,0,0,0.08) 30%, rgba(0,0,0,0.15) 60%, rgba(0,0,0,0.12) 100%);
      -webkit-mask-image: linear-gradient(to right, transparent 0%, rgba(0,0,0,0.08) 30%, rgba(0,0,0,0.15) 60%, rgba(0,0,0,0.12) 100%);
      z-index: 0;
      pointer-events: none;
    }
    @media (max-width: 900px) {
      .hero::after {
        width: 100%;
        height: 40%;
        top: 0;
        mask-image: linear-gradient(to bottom, rgba(0,0,0,0.1) 0%, transparent 100%);
        -webkit-mask-image: linear-gradient(to bottom, rgba(0,0,0,0.1) 0%, transparent 100%);
      }
    }
    /* Floating sub-pose photos */
    .tei-sub-photos {
      position: absolute;
      inset: 0;
      pointer-events: none;
      z-index: 3;
    }
    .tei-sub {
      position: absolute;
      border-radius: 50%;
      object-fit: cover;
      border: 3px solid #fff;
      box-shadow: 0 8px 25px rgba(0,0,0,0.12);
      opacity: 0.9;
    }
    .tei-sub-1 {
      width: 90px;
      height: 90px;
      bottom: 35%;
      left: -50px;
      animation: float 5s ease-in-out infinite;
      animation-delay: -1s;
    }
    .tei-sub-2 {
      width: 70px;
      height: 70px;
      top: 15%;
      right: -20px;
      animation: float 6s ease-in-out infinite;
      animation-delay: -3s;
    }
    @media (max-width: 900px) {
      .tei-sub-photos { display: none; }
    }

    /* Hero Selling Points */
    .hero-selling-points {
      display: flex;
      gap: 12px;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }
    .selling-point {
      display: flex;
      align-items: center;
      gap: 8px;
      background: #fff;
      border: 1px solid rgba(212,112,122,0.2);
      padding: 10px 16px;
      border-radius: 50px;
      font-size: 13px;
      font-weight: 500;
      color: var(--ink);
      white-space: nowrap;
    }
    .selling-point i {
      color: var(--accent);
      font-size: 14px;
      width: 20px;
      text-align: center;
    }
    @media (max-width: 900px) {
      .hero-selling-points { justify-content: center; }
      .selling-point { font-size: 12px; padding: 8px 14px; }
    }

    /* Books more indicator */
    .books-more {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 56px;
      height: 78px;
      background: var(--accent-soft);
      border-radius: 4px;
      font-size: 14px;
      font-weight: 700;
      color: var(--accent);
    }
    @media (max-width: 900px) {
      .books-more { width: 46px; height: 64px; font-size: 12px; }
    }

    /* Floating product cards in hero visual */
    .hero-float-products {
      position: absolute;
      inset: 0;
      pointer-events: none;
      z-index: 4;
    }
    .hero-float-item {
      position: absolute;
      background: #fff;
      border-radius: 12px;
      padding: 8px;
      box-shadow: 0 8px 30px rgba(0,0,0,0.1);
      display: flex;
      flex-direction: column;
      align-items: center;
      animation: float 5s ease-in-out infinite;
    }
    .hero-float-item img {
      width: 50px;
      height: 60px;
      object-fit: contain;
    }
    .hf-tag {
      font-size: 9px;
      font-weight: 700;
      color: var(--accent);
      margin-top: 4px;
      white-space: nowrap;
    }
    .hf-1 {
      top: 8%;
      right: 5%;
      animation-delay: 0s;
    }
    .hf-2 {
      bottom: 30%;
      left: -8%;
      animation-delay: -2s;
    }
    .hf-3 {
      bottom: 10%;
      right: 15%;
      animation-delay: -4s;
    }
    @media (max-width: 900px) {
      .hero-float-products { display: none; }
    }

    /* Hero Stats Row */
    .hero-stats {
      display: flex;
      align-items: center;
      gap: 0;
      margin-bottom: 24px;
      padding: 20px 0;
      border-top: 1px solid rgba(0,0,0,0.06);
      border-bottom: 1px solid rgba(0,0,0,0.06);
    }
    .hero-stat {
      flex: 1;
      text-align: center;
    }
    .hero-stat-num {
      font-family: 'Cormorant Garamond', serif;
      font-size: 36px;
      font-weight: 600;
      color: var(--accent);
      line-height: 1;
    }
    .hero-stat-unit {
      font-size: 14px;
      font-weight: 700;
      color: var(--accent);
    }
    .hero-stat-label {
      display: block;
      font-size: 11px;
      color: var(--ink-muted);
      margin-top: 4px;
      letter-spacing: 0.05em;
    }
    .hero-stat-divider {
      width: 1px;
      height: 40px;
      background: rgba(0,0,0,0.08);
    }
    .hero-cta-area {
      text-align: left;
    }
    .hero-cta-sub {
      margin-top: 12px;
      font-size: 13px;
      color: var(--ink-muted);
      letter-spacing: 0.03em;
    }
    .hero-cta-sub strong {
      color: var(--accent);
      font-size: 15px;
    }
    @media (max-width: 900px) {
      .hero-stats { justify-content: center; gap: 0; padding: 16px 0; }
      .hero-stat-num { font-size: 28px; }
      .hero-cta-area { text-align: center; }
    }

  </style>
</head>
<body>

  <!-- Header -->
  <header class="header" id="header">
    <div class="header-inner">
      <div class="collab-logo">
        <img src="https://japankuru.com/gld-kanri/data/themes/japankuru/assets/images/logo.svg" alt="JAPANKURU">
        <span class="collab-x">×</span>
        <div class="partner-logo">
          <img src="https://www.gldaily.com/gld-kanri/wp-content/uploads/2025/12/teisensei_company.png" alt="日本藥妝研究室" class="partner-logo-img">
          <span class="partner-name">日本藥妝研究室</span>
        </div>
      </div>
      <span class="header-season">2026 春季號</span>
      <nav class="header-nav">
        <a class="header-nav-item" href="#sakura-section">櫻花情報</a>
        <a class="header-nav-item" href="#products-section">推薦商品</a>
        <a class="header-nav-item" href="#store-guide">購買指南</a>
        <a class="header-nav-item" href="#articles-section">相關文章</a>
      </nav>
    </div>
  </header>

  <!-- Mobile Section Nav -->
  <nav class="section-nav" id="sectionNav">
    <div class="section-nav-inner">
      <a class="section-nav-item" href="#sakura-section">櫻花情報</a>
      <a class="section-nav-item" href="#products-section">推薦商品</a>
      <a class="section-nav-item" href="#store-guide">購買指南</a>
      <a class="section-nav-item" href="#articles-section">相關文章</a>
    </div>
  </nav>

  <!-- Hero -->
  <section class="hero" id="hero">
    <div class="hero-inner">
      <div class="hero-text-area">
        <div class="hero-tag-group">
          <span class="hero-tag tag-season">2026 春季號</span>
          <span class="hero-tag tag-target">給來自台灣的旅人</span>
        </div>
        <h1>
          「去日本該買什麼？」<br>
          這個問題，<br>
          <span class="hl-text">我花了14年來回答。</span>
        </h1>
        
        <p class="hero-subtitle">
          每次從台灣來日本，朋友都會問我：<br>
          「欸，這次有什麼推薦的？」<br>
          所以我一直只挑選<em>真正好的東西</em>。
        </p>

        <!-- Stats Row -->
        <div class="hero-stats">
          <div class="hero-stat">
            <span class="hero-stat-num">14</span>
            <span class="hero-stat-unit">年</span>
            <span class="hero-stat-label">藥妝研究</span>
          </div>
          <div class="hero-stat-divider"></div>
          <div class="hero-stat">
            <span class="hero-stat-num">9</span>
            <span class="hero-stat-unit">本</span>
            <span class="hero-stat-label">著書出版</span>
          </div>
          <div class="hero-stat-divider"></div>
          <div class="hero-stat">
            <span class="hero-stat-num">50</span>
            <span class="hero-stat-unit">萬+</span>
            <span class="hero-stat-label">社群追蹤</span>
          </div>
        </div>
        
        <div class="hero-story-box">
          <p class="story-lead">
            持續跑遍藥妝店14年，每當有新商品就親自試用，只介紹那些「想推薦給台灣朋友」的好物。
          </p>
          <div class="story-books">
            <img src="https://www.gldaily.com/gld-kanri/wp-content/uploads/2025/12/12.晶冠日本藥妝美研購3.jpg" alt="著書1">
            <img src="https://www.gldaily.com/gld-kanri/wp-content/uploads/2025/12/2018-日本藥妝美研購4-JAPANCOSMEGOBEAUTY4S_page-0001-scaled.jpg" alt="著書2">
            <img src="https://www.gldaily.com/gld-kanri/wp-content/uploads/2025/12/2020-日本藥妝美研購6-20200621034608124765.webp" alt="著書3">
            <img src="https://www.gldaily.com/gld-kanri/wp-content/uploads/2025/12/2023-日本藥妝美研購7-20221216040749386921.webp" alt="著書4">
            <img src="https://www.gldaily.com/gld-kanri/wp-content/uploads/2025/12/2025-日本藥妝美研購9-.jpg" alt="著書5">
            <span class="books-more">+4</span>
          </div>
        </div>

        <div class="hero-cta-area">
          <button class="hero-cta-btn" onclick="document.querySelector('.products-section').scrollIntoView({behavior: 'smooth'})">
            查看2026年春季推薦
            <i class="fas fa-shopping-bag"></i>
          </button>
          <p class="hero-cta-sub">本季嚴選 <strong>6款</strong> 必買好物</p>
        </div>
      </div>
      <div class="hero-visual-area">
        <div class="tei-wrapper">
          <!-- Rotating speech bubbles - positioned per pose -->
          <div class="tei-speech tei-speech-0 speech-slide active" data-slide="0">
            <p class="speech-text">
              「比台灣便宜的、<br>只有日本才買得到的。<br><em>兩種都告訴你。</em>」
            </p>
          </div>
          <div class="tei-speech tei-speech-1 speech-slide" data-slide="1">
            <p class="speech-text">
              「衝動購物容易踩雷，<br><em>不如先做功課！</em><br>我來幫你。」
            </p>
          </div>
          <div class="tei-speech tei-speech-2 speech-slide" data-slide="2">
            <p class="speech-text">
              「從上千種商品中，<br><em>我幫你嚴選好了！</em><br>請慢慢看吧～」
            </p>
          </div>
          <!-- Rotating photos -->
          <div class="tei-photo-stack">
            <img src="https://www.gldaily.com/gld-kanri/wp-content/uploads/2026/02/IMG_9993-拷贝-scaled.png" alt="鄭世彬" class="tei-photo tei-slide active" data-slide="0">
            <img src="https://www.gldaily.com/gld-kanri/wp-content/uploads/2026/02/IMG_0005-拷贝-1-scaled.png" alt="鄭世彬" class="tei-photo tei-slide" data-slide="1">
            <img src="https://www.gldaily.com/gld-kanri/wp-content/uploads/2026/02/IMG_0008-拷贝-scaled.png" alt="鄭世彬" class="tei-photo tei-slide" data-slide="2">
          </div>
          <div class="tei-name-tag">
            <p class="name-jp">鄭 世彬</p>
            <p class="name-role">日本藥妝研究室</p>
          </div>
          <div class="tei-credential-badge">
            <i class="fas fa-certificate"></i> 鄭老師嚴選
          </div>
          <!-- Slide indicators -->
          <div class="tei-slide-dots">
            <span class="tei-dot active" data-slide="0"></span>
            <span class="tei-dot" data-slide="1"></span>
            <span class="tei-dot" data-slide="2"></span>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Trust Signal Bar -->
  <div class="trust-bar">
    <span class="trust-item"><i class="fas fa-book"></i> <strong>9本</strong>著書出版</span>
    <span class="trust-item"><i class="fas fa-flask"></i> <strong>14年</strong>日本藥妝研究</span>
    <span class="trust-item"><i class="fas fa-users"></i> <strong>50萬+</strong>社群追蹤</span>
    <span class="trust-item"><i class="fas fa-star"></i> 台灣藥妝達人<strong>No.1</strong></span>
  </div>

  <!-- Split Banner -->
  <section class="split-banner-section">
    <span class="sakura-float left">❀</span>
    <span class="sakura-float right">❀</span>

    <div class="split-header">
      <span class="split-eyebrow">Special Feature 2026 Spring</span>
      <h2 class="split-title">「為什麼是這3個？」<br>鄭老師揭曉，選定的理由</h2>
      <p class="split-subtitle">
        歷經14年研究、試用過數千種產品的專家，<br>2026年春天，向台灣朋友們推薦「一定要買」的3款好物。
      </p>
    </div>

    <div class="split-container">
      <div class="split-panel" onclick="openDetailModal(1)">
        <img src="https://images.unsplash.com/photo-1556228720-195a672e8a03?w=800&q=80" class="split-bg" alt="Bioré">
        <div class="split-logo"><span class="split-logo-text">Kao</span></div>
        <div class="split-content">
          <span class="split-num">01</span>
          <span class="split-brand">Bioré The Cleanse</span>
          <h3 class="split-headline">不用搓揉的革命。<br>「瞬浮技術」改變常識。</h3>
          <p class="split-desc">2023年，花王投入美容界的革命。只要塗上，彩妝就會浮起，用水沖掉就好。</p>
          <span class="split-btn">查看詳情 <i class="fas fa-arrow-right"></i></span>
        </div>
      </div>

      <div class="split-panel" onclick="openDetailModal(2)">
        <img src="https://images.unsplash.com/photo-1570194065650-d99fb4b38b15?w=800&q=80" class="split-bg" alt="Yunth">
        <div class="split-logo"><span class="split-logo-text">Yunth</span></div>
        <div class="split-content">
          <span class="split-num">02</span>
          <span class="split-brand">生VC美白美容液</span>
          <h3 class="split-headline">30秒的新鮮度。<br>對抗氧化的新美白。</h3>
          <p class="split-desc">不使用一滴水的100%純度維他命C。獨立包裝守護開封後30秒的黃金時間。</p>
          <span class="split-btn">查看詳情 <i class="fas fa-arrow-right"></i></span>
        </div>
      </div>

      <div class="split-panel" onclick="openDetailModal(3)">
        <img src="https://images.unsplash.com/photo-1526947425960-945c6e72858f?w=800&q=80" class="split-bg" alt="紫外線予報">
        <div class="split-logo"><span class="split-logo-text">石澤研究所</span></div>
        <div class="split-content">
          <span class="split-num">03</span>
          <span class="split-brand">紫外線予報 UV防曬棒</span>
          <h3 class="split-headline">不弄髒手的新習慣。<br>全家都能用的溫和配方。</h3>
          <p class="split-desc">上市後立刻限購的話題作。棒狀的創新與兒童也能使用的配方。</p>
          <span class="split-btn">查看詳情 <i class="fas fa-arrow-right"></i></span>
        </div>
      </div>
    </div>

    <div class="split-footer">
      <a href="#" class="split-cta">閱讀特輯文章 <i class="fas fa-arrow-right"></i></a>
    </div>
  </section>

  <!-- Featured Carousel -->
  <section class="featured-section">
    <div class="featured-header">
      <span class="featured-eyebrow">Trending Now</span>
      <h2 class="featured-title">現在最受矚目的商品</h2>
      <p class="featured-subtitle">在社群媒體上關注度急速上升的商品精選。</p>
    </div>

    <div class="featured-carousel">
      <article class="featured-card" onclick="scrollToProduct(1)">
        <img src="https://www.gldaily.com/gld-kanri/wp-content/uploads/2025/12/20250303-001-01.webp" alt="Bioré" class="featured-card-bg">
        <div class="featured-card-overlay"></div>
        <div class="featured-card-inner">
          <h3 class="featured-card-title">Bioré The CLEANSE</h3>
          <p class="featured-card-copy">比台灣便宜30%以上<br>革命性卸妝</p>
          <span class="featured-card-btn">查看詳情 <i class="fas fa-chevron-down"></i></span>
        </div>
      </article>

      <article class="featured-card" onclick="scrollToProduct(7)">
        <img src="https://images.unsplash.com/photo-1505576399279-565b52d4ac71?w=600&q=80" alt="コラーゲン" class="featured-card-bg">
        <div class="featured-card-overlay"></div>
        <div class="featured-card-inner">
          <h3 class="featured-card-title">膠原蛋白C<br>果凍</h3>
          <p class="featured-card-copy">獨立包裝方便分送<br>美味持續的美容習慣</p>
          <span class="featured-card-btn">查看詳情 <i class="fas fa-chevron-down"></i></span>
        </div>
      </article>

      <article class="featured-card" onclick="scrollToProduct(4)">
        <img src="https://images.unsplash.com/photo-1587854692152-cbe660dbde88?w=600&q=80" alt="パブロン" class="featured-card-bg">
        <div class="featured-card-overlay"></div>
        <div class="featured-card-inner">
          <h3 class="featured-card-title">Pabron Ace<br>Pro-X</h3>
          <p class="featured-card-copy">被喜愛超過30年<br>日本的國民感冒藥</p>
          <span class="featured-card-btn">查看詳情 <i class="fas fa-chevron-down"></i></span>
        </div>
      </article>

      <article class="featured-card" onclick="scrollToProduct(2)">
        <img src="https://www.gldaily.com/gld-kanri/wp-content/uploads/2025/12/Yunth-生VC美白美容液.png" alt="Yunth" class="featured-card-bg">
        <div class="featured-card-overlay"></div>
        <div class="featured-card-inner">
          <h3 class="featured-card-title">Yunth<br>生VC美白美容液</h3>
          <p class="featured-card-copy">100%純度生維他命C<br>日本限定美容液</p>
          <span class="featured-card-btn">查看詳情 <i class="fas fa-chevron-down"></i></span>
        </div>
      </article>

      <article class="featured-card" onclick="scrollToProduct(3)">
        <img src="https://www.gldaily.com/gld-kanri/wp-content/uploads/2025/12/outline-01.jpg" alt="紫外線予報" class="featured-card-bg">
        <div class="featured-card-overlay"></div>
        <div class="featured-card-inner">
          <h3 class="featured-card-title">紫外線予報<br>UV防曬棒</h3>
          <p class="featured-card-copy">上市後立刻限購<br>話題棒狀防曬</p>
          <span class="featured-card-btn">查看詳情 <i class="fas fa-chevron-down"></i></span>
        </div>
      </article>

      <article class="featured-card" onclick="scrollToProduct(10)">
        <img src="https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=600&q=80" alt="モンダミン" class="featured-card-bg">
        <div class="featured-card-overlay"></div>
        <div class="featured-card-inner">
          <h3 class="featured-card-title">MONDAMIN<br>PREMIUM CARE</h3>
          <p class="featured-card-copy">全家都能用的大容量<br>金色薄荷的清爽感</p>
          <span class="featured-card-btn">查看詳情 <i class="fas fa-chevron-down"></i></span>
        </div>
      </article>
    </div>

    <div class="scroll-hint">
      <span>滑動查看更多</span>
      <i class="fas fa-arrow-right"></i>
    </div>
  </section>

  <!-- Section Transition -->
  <div class="section-transition">
    <p>我的推薦還有更多 ──</p>
  </div>

  <!-- Products Section -->
  <section class="products-section" id="products-section">
    <div class="section-header">
      <h2>分類推薦</h2>
      <p>依照需求，找到最適合的商品吧</p>
    </div>

    <div class="card-hint">
      <i class="fas fa-hand-pointer"></i>
      <span class="hint-pc">點擊卡片可查看<strong>體驗評價</strong></span>
      <span class="hint-mobile">點擊卡片<strong>展開詳情</strong></span>
      <span class="hint-divider">|</span>
      <i class="far fa-heart" style="color:var(--accent)"></i>
      <span>按 ♡ 可儲存到<strong>我的購物清單</strong></span>
    </div>

    <!-- First-visit onboarding tooltip -->
    <div class="onboarding-tip" id="onboardingTip">
      <div class="onboarding-tip-inner">
        <img src="https://www.gldaily.com/gld-kanri/wp-content/uploads/2026/02/IMG_9990-拷贝-scaled.png" alt="鄭老師" class="onboarding-face">
        <div class="onboarding-content">
          <p>按下 <i class="far fa-heart" style="color:var(--accent)"></i> 就能儲存商品！<br>出發前確認你的<strong>購物清單</strong>吧 🛍️</p>
        </div>
        <button class="onboarding-close" onclick="closeOnboarding()">✕</button>
      </div>
    </div>

    <div class="tabs-nav">
      <button class="tab-btn active" data-tab="cosme">彩妝・美容</button>
      <button class="tab-btn" data-tab="medicine">醫藥品</button>
      <button class="tab-btn" data-tab="health">健康食品・食品</button>
      <button class="tab-btn" data-tab="daily">日用品</button>
    </div>

    <div id="tabContents"></div>
  </section>

  <!-- Sakura — 鄭老師的賞櫻購物筆記 -->
  <div class="sakura-hero" id="sakura-section">
    <div class="sakura-hero-inner">
      <!-- LEFT: Sensei cutout + speech bubble -->
      <div class="sakura-hero-visual">
        <div class="sakura-speech" id="skSpeech">
          <div class="sakura-speech-name">鄭老師</div>
          <span id="skSpeechText">日期輸入好了嗎？我來幫你找最適合的城市！🌸</span>
        </div>
        <span class="sakura-hero-petal">🌸</span>
        <span class="sakura-hero-petal">🌸</span>
        <span class="sakura-hero-petal">🌸</span>
        <img class="sakura-hero-cutout" src="https://www.gldaily.com/gld-kanri/wp-content/uploads/2026/02/IMG_9999-拷贝-scaled.png" alt="鄭老師">
      </div>

      <!-- RIGHT: Text + Picker -->
      <div class="sakura-hero-text">
        <span class="sakura-hero-label">🌸 SAKURA × SHOPPING 2026</span>
        <div class="sakura-hero-sensei-tag">
          <img src="https://japankuru.com/gld-kanri/data/uploads/2025/02/IMG_9993-1-150x150.jpg" alt="鄭老師">
          <span>鄭老師（鄭世彬）</span>
        </div>
        <h2>賞櫻季節，<br>也是<em>藥妝購物</em>的最佳時機</h2>
        <p class="sakura-hero-quote" id="skSenseiText">
          每年3～4月，日本的藥妝店都會推出櫻花限定商品。<br>
          什麼時候去、去哪個城市、在哪買最划算？<br>
          先輸入你的旅行日期，我來幫你安排！
        </p>

        <div class="sakura-hero-picker">
          <div class="sakura-hero-picker-title">🗓️ 你的旅行日期是？</div>
          <p class="sakura-hero-picker-sub">幫你找出最適合賞櫻＋購物的城市</p>
          <div class="sakura-date-form" id="skDateForm">
            <div class="sakura-date-wrap">
              <input type="date" class="sakura-date-input" id="skTravelStart" value="2026-03-28">
              <span class="sakura-date-label">出發</span>
            </div>
            <div class="sakura-date-wrap">
              <input type="date" class="sakura-date-input" id="skTravelEnd" value="2026-04-03">
              <span class="sakura-date-label">回程</span>
            </div>
            <button type="button" class="sakura-date-btn" id="skDateBtn">查詢 →</button>
          </div>

          <!-- Inline Result: 4-stage progress bar -->
          <div class="sakura-result-inline" id="skResultInline">
            <div class="sk-result-head">
              <span class="sk-result-icon" id="skResultIcon">🌺</span>
              <span class="sk-result-city" id="skResultCity">東京</span>
              <span class="sk-result-badge" id="skResultBadge">滿開</span>
            </div>
            <div class="sk-result-status" id="skResultStatus">滿開！最佳觀賞時期 🎉</div>

            <div class="sk-progress" id="skProgress">
              <div class="sk-progress-fill" id="skProgressFill"></div>
              <div class="sk-stage" data-stage="bloom" id="skStage0">
                <div class="sk-stage-dot">1</div>
                <div class="sk-stage-label">開花</div>
                <div class="sk-stage-date" id="skDate0"></div>
              </div>
              <div class="sk-stage" data-stage="full" id="skStage1">
                <div class="sk-stage-dot">2</div>
                <div class="sk-stage-label">滿開</div>
                <div class="sk-stage-date" id="skDate1"></div>
              </div>
              <div class="sk-stage" data-stage="fall" id="skStage2">
                <div class="sk-stage-dot">3</div>
                <div class="sk-stage-label">飄落</div>
                <div class="sk-stage-date" id="skDate2"></div>
              </div>
              <div class="sk-stage" data-stage="snow" id="skStage3">
                <div class="sk-stage-dot">4</div>
                <div class="sk-stage-label">吹雪</div>
                <div class="sk-stage-date" id="skDate3"></div>
              </div>
            </div>

            <div class="sk-result-retry">
              <button type="button" class="sk-result-retry-btn" id="skResultRetry">換個日期再查一次</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Sakura Detail Section (stages + cities) -->
  <section class="sakura-section">
    <div class="sakura-inner">
      <div class="sakura-section-label">CHERRY BLOSSOM TIMELINE</div>
      <div class="sakura-section-title">🌸 開花到散落，大約2週</div>

      <div class="sakura-stages">
        <div class="sakura-stage" data-stage-idx="0">
          <div class="sakura-stage-img">
            <span class="sakura-stage-num">1</span>
            <img src="https://gvs.weathernews.jp/s/topics/img/202503/202503260365_top_img_A.jpg?1743466944" alt="開花" loading="lazy">
          </div>
          <div class="sakura-stage-body">
            <div class="sakura-stage-name">開花</div>
            <div class="sakura-stage-sub">かいか</div>
            <p class="sakura-stage-desc">5～6朵花綻放即宣告「開花」</p>
            <span class="sakura-stage-timing">基準日</span>
          </div>
        </div>
        <div class="sakura-stage" data-stage-idx="1">
          <div class="sakura-stage-img">
            <span class="sakura-stage-num">2</span>
            <img src="https://images.unsplash.com/photo-1522383225653-ed111181a951?auto=format&fit=crop&w=600&q=80" alt="滿開" loading="lazy">
          </div>
          <div class="sakura-stage-body">
            <div class="sakura-stage-name">滿開</div>
            <div class="sakura-stage-sub">まんかい</div>
            <p class="sakura-stage-desc">80%以上綻放！最佳觀賞時機</p>
            <span class="sakura-stage-timing">開花 +7天</span>
          </div>
        </div>
        <div class="sakura-stage" data-stage-idx="2">
          <div class="sakura-stage-img">
            <span class="sakura-stage-num">3</span>
            <img src="https://www.hirosakipark.jp/sakura/wp-content/uploads/2021/04/enjoy04-01.jpg" alt="散り始め" loading="lazy">
          </div>
          <div class="sakura-stage-body">
            <div class="sakura-stage-name">開始飄落</div>
            <div class="sakura-stage-sub">ちりはじめ</div>
            <p class="sakura-stage-desc">花瓣飄落中，夢幻又浪漫</p>
            <span class="sakura-stage-timing">滿開 +4天</span>
          </div>
        </div>
        <div class="sakura-stage" data-stage-idx="3">
          <div class="sakura-stage-img">
            <span class="sakura-stage-num">4</span>
            <img src="https://www.543life.com/content/wp-content/uploads/2024/04/main_240407-670x670.webp" alt="桜吹雪" loading="lazy">
          </div>
          <div class="sakura-stage-body">
            <div class="sakura-stage-name">櫻花吹雪</div>
            <div class="sakura-stage-sub">さくらふぶき</div>
            <p class="sakura-stage-desc">花瓣隨風飛舞，如雪般夢幻</p>
            <span class="sakura-stage-timing">飄落 +3天</span>
          </div>
        </div>
      </div>
      <div class="sakura-stage-msg">
        🌸 開花後約<strong>2週</strong>都能賞櫻！即使錯過滿開，散落和吹雪也非常美 ✨
      </div>

      <div class="sakura-section-label">FORECAST 2026</div>
      <div class="sakura-section-title">🗾 各城市開花預測一覽</div>

      <div class="sakura-grid">
        <div class="sakura-city">
          <div class="name">福岡</div>
          <span class="bloom-status status-upcoming">即將開花</span>
          <p class="bloom-date">🌸 3/20</p>
          <p class="full">滿開 <strong>3/28</strong></p>
          <p class="city-sub">飄落 4/1 ・ 吹雪 4/4</p>
        </div>
        <div class="sakura-city">
          <div class="name">東京</div>
          <span class="bloom-status status-upcoming">即將開花</span>
          <p class="bloom-date">🌸 3/24</p>
          <p class="full">滿開 <strong>4/1</strong></p>
          <p class="city-sub">飄落 4/5 ・ 吹雪 4/8</p>
        </div>
        <div class="sakura-city">
          <div class="name">大阪</div>
          <span class="bloom-status status-upcoming">即將開花</span>
          <p class="bloom-date">🌸 3/27</p>
          <p class="full">滿開 <strong>4/3</strong></p>
          <p class="city-sub">飄落 4/7 ・ 吹雪 4/10</p>
        </div>
        <div class="sakura-city">
          <div class="name">京都</div>
          <span class="bloom-status status-upcoming">即將開花</span>
          <p class="bloom-date">🌸 3/28</p>
          <p class="full">滿開 <strong>4/5</strong></p>
          <p class="city-sub">飄落 4/9 ・ 吹雪 4/12</p>
        </div>
        <div class="sakura-city">
          <div class="name">名古屋</div>
          <span class="bloom-status status-upcoming">即將開花</span>
          <p class="bloom-date">🌸 3/24</p>
          <p class="full">滿開 <strong>4/2</strong></p>
          <p class="city-sub">飄落 4/6 ・ 吹雪 4/9</p>
        </div>
        <div class="sakura-city">
          <div class="name">札幌</div>
          <span class="bloom-status status-waiting">尚早</span>
          <p class="bloom-date">🌸 4/25</p>
          <p class="full">滿開 <strong>5/2</strong></p>
          <p class="city-sub">飄落 5/6 ・ 吹雪 5/9</p>
        </div>
        <div class="sakura-city">
          <div class="name">沖繩</div>
          <span class="bloom-status status-done">已結束</span>
          <p class="bloom-date">🌸 1/15</p>
          <p class="full">滿開 <strong>2/1</strong></p>
          <p class="city-sub">飄落 2/8 ・ 吹雪 2/12</p>
        </div>
        <div class="sakura-city">
          <div class="name">仙台</div>
          <span class="bloom-status status-upcoming">即將開花</span>
          <p class="bloom-date">🌸 4/5</p>
          <p class="full">滿開 <strong>4/11</strong></p>
          <p class="city-sub">飄落 4/15 ・ 吹雪 4/18</p>
        </div>
      </div>

      <div class="sakura-footer">
        <p class="sakura-source">資料來源：<a href="https://weathernews.jp/s/sakura/" target="_blank">Weather News</a> 2026年預測（每週更新）</p>
        <div class="sakura-tip">
          <i class="fas fa-lightbulb"></i>
          台灣旅客推薦<strong>3/25〜4/5</strong>東京・大阪賞櫻＋購物！別忘了花粉對策商品
        </div>
      </div>
    </div>
  </section>

  <!-- Store Guide -->
  <section class="store-guide" id="store-guide">
    <div class="sg-inner">

      <div class="sg-header">
        <h2>購買指南</h2>
        <p>讓你的日本藥妝購物不踩雷</p>
      </div>

      <div class="sg-tabs">
        <button class="sg-tab is-active" data-sg="tips">🛂 免稅完全攻略</button>
        <button class="sg-tab" data-sg="stores">🏪 藥妝店指南</button>
        <button class="sg-tab" data-sg="coupon">🎫 獨家優惠券</button>
      </div>

      <!-- Tab 1: 免稅攻略 -->
      <div class="sg-panel is-active" id="sg-tips">

        <div class="sg-tax-card">
          <div class="sg-tax-img" style="background-image: url('https://images.unsplash.com/photo-1528164344705-47542687000d?auto=format&fit=crop&w=800&q=80');">
            <div class="sg-tax-overlay">
              <div class="sg-tax-big">免稅</div>
              <div class="sg-tax-sub">TAX FREE</div>
            </div>
          </div>

          <div class="sg-tax-body">
            <div class="sg-tax-title">🛂 購買時直接免除消費稅</div>
            <p class="sg-tax-desc">目前在日本，外國旅客在標示「TAX FREE」的店鋪購物時，<strong>結帳時直接扣除消費稅（10%）</strong>。不需要事後申請退稅。</p>

            <div class="sg-tax-facts">
              <div class="sg-tax-fact">
                <div class="sg-tax-fact-num">¥5,000</div>
                <div class="sg-tax-fact-text">同一店鋪、同日<br>未稅合計達此金額</div>
              </div>
              <div class="sg-tax-fact">
                <div class="sg-tax-fact-num">🛂</div>
                <div class="sg-tax-fact-text">結帳時出示<br>護照正本</div>
              </div>
              <div class="sg-tax-fact">
                <div class="sg-tax-fact-num">30日</div>
                <div class="sg-tax-fact-text">消耗品須在<br>30天內帶出日本</div>
              </div>
            </div>

            <div class="sg-tax-alert">
              <div class="sg-tax-alert-badge">⚠️ 制度即將變更</div>
              <p><strong>2026年11月起</strong>，日本免稅制度預計改為「先付稅、出境時退稅」的退稅（Refund）方式。櫻花季（3〜4月）前往的旅客仍適用現行制度，請安心購物！</p>
            </div>
          </div>
        </div>

        <div class="sg-sensei-tip">
          <img src="https://japankuru.com/gld-kanri/data/uploads/2025/02/IMG_9994-1-150x150.jpg" alt="鄭老師">
          <p>現在的制度對旅客很方便，買的時候直接免稅！趁制度還沒改之前多買一些吧 😄 另外，住宅區的藥妝店通常比觀光區便宜10〜30%喔。</p>
        </div>
      </div>

      <!-- Tab 2: 藥妝店指南 -->
      <div class="sg-panel" id="sg-stores">

        <div class="sg-stores-list">

          <div class="sg-store-card">
            <div class="sg-store-hero" style="background-image: url('https://images.unsplash.com/photo-1631549916768-4119b2e5f926?auto=format&fit=crop&w=800&q=80');">
              <span class="sg-store-badge">品牌最齊全</span>
            </div>
            <div class="sg-store-body">
              <div class="sg-store-name-row">
                <h3>松本清</h3>
                <span class="sg-store-jp">マツモトキヨシ</span>
              </div>
              <p class="sg-store-desc">日本最大連鎖藥妝店，全國超過1,700家。自有品牌「matsukiyo」品質好又便宜，是內行人的最愛。觀光區幾乎到處可見，營業時間長。</p>
              <div class="sg-store-highlights">
                <span>✅ PB商品CP值高</span>
                <span>✅ 免稅對應完善</span>
                <span>✅ 中文服務多</span>
              </div>
              <div class="sg-store-sensei">💡 鄭老師：matsukiyo的維他命和面膜是隱藏好物，比大牌便宜一半！</div>
            </div>
          </div>

          <div class="sg-store-card">
            <div class="sg-store-hero" style="background-image: url('https://images.unsplash.com/photo-1528164344705-47542687000d?auto=format&fit=crop&w=800&q=80');">
              <span class="sg-store-badge">價格最便宜</span>
            </div>
            <div class="sg-store-body">
              <div class="sg-store-name-row">
                <h3>大國藥妝</h3>
                <span class="sg-store-jp">ダイコクドラッグ</span>
              </div>
              <p class="sg-store-desc">以低價著稱的大阪發跡藥妝店。經常有限時特賣和驚喜價，關西地區店鋪特別多。店內常有中文服務人員。</p>
              <div class="sg-store-highlights">
                <span>✅ 價格戰王者</span>
                <span>✅ 限時特賣多</span>
                <span>✅ 關西店多</span>
              </div>
              <div class="sg-store-sensei">💡 鄭老師：大國的限時特賣真的很便宜，但要注意免稅最低金額的計算！</div>
            </div>
          </div>

          <div class="sg-store-card">
            <div class="sg-store-hero" style="background-image: url('https://images.unsplash.com/photo-1556742049-0cfed4f6a45d?auto=format&fit=crop&w=800&q=80');">
              <span class="sg-store-badge">醫藥品專門</span>
            </div>
            <div class="sg-store-body">
              <div class="sg-store-name-row">
                <h3>杉藥局</h3>
                <span class="sg-store-jp">スギ薬局</span>
              </div>
              <p class="sg-store-desc">日本在地人最常去的藥局之一。處方藥對應，醫藥品種類特別豐富。價格穩定，不太會被觀光客哄抬。</p>
              <div class="sg-store-highlights">
                <span>✅ 處方藥對應</span>
                <span>✅ 醫藥品種類最多</span>
                <span>✅ 在地人價格</span>
              </div>
              <div class="sg-store-sensei">💡 鄭老師：想找真正的「藥」（感冒藥、胃腸藥等）來這裡準沒錯，比觀光區便宜很多。</div>
            </div>
          </div>

          <div class="sg-store-card">
            <div class="sg-store-hero" style="background-image: url('https://images.unsplash.com/photo-1512820790803-83ca734da794?auto=format&fit=crop&w=800&q=80');">
              <span class="sg-store-badge">美妝強項</span>
            </div>
            <div class="sg-store-body">
              <div class="sg-store-name-row">
                <h3>可可卡拉</h3>
                <span class="sg-store-jp">ココカラファイン</span>
              </div>
              <p class="sg-store-desc">美妝品牌陳列特別用心，高端品牌和開架式都有。店內環境整潔舒適，適合不趕時間慢慢選購的人。</p>
              <div class="sg-store-highlights">
                <span>✅ 高端+開架美妝</span>
                <span>✅ 店內整潔舒適</span>
                <span>✅ 美妝諮詢服務</span>
              </div>
              <div class="sg-store-sensei">💡 鄭老師：美妝控必去！這裡的化妝品陳列最好逛，工作人員也很專業。</div>
            </div>
          </div>
        </div>
      </div>

      <!-- Tab 3: KOJIMA Coupon -->
      <div class="sg-panel" id="sg-coupon">
        <div class="sg-coupon-card">
          <div class="sg-coupon-flag">🎫 JAPANKURU 獨家優惠券</div>
          <div class="sg-coupon-hero">
            <img src="https://www.japankuru.com/gld-kanri/data/uploads/2025/10/20251202%E3%80%90Web%E3%80%91JAPAN-KURU%EF%BC%88%E7%B9%81%E4%BD%93%EF%BC%89%E4%BC%81%E6%A5%AD%E3%81%82%E3%82%8A_2026.0831-Large.jpeg" alt="KOJIMA x BicCamera 優惠券" class="sg-coupon-img">
          </div>
          <div class="sg-coupon-body">
            <div class="sg-coupon-title">KOJIMA × BicCamera</div>
            <div class="sg-coupon-sub">免稅10％＋電器藥妝最高7%OFF 雙重優惠</div>
            <p class="sg-coupon-expire">有效期限 2026/8/31 ・ 全國約140家店鋪可使用</p>
            <p class="sg-coupon-save-note">📲 截圖保存，結帳時出示即可！</p>
          </div>
          <div class="sg-sensei-tip">
            <img src="https://japankuru.com/gld-kanri/data/uploads/2025/02/IMG_9994-1-150x150.jpg" alt="鄭老師">
            <p>這是JAPANKURU專屬的優惠券，外面找不到！買相機或Apple產品差額非常大，越貴的商品越划算。結帳前出示這張就好 😉</p>
          </div>
        </div>
      </div>

    </div>
  </section>

  <!-- Outro -->
  <section class="outro-section" id="articles-section">
    <div class="outro-inner">
      <div class="related-articles">
        <div class="related-header">
          <h2>想看更多？</h2>
          <p>JAPANKURU的推薦文章</p>
        </div>
        <div class="articles-grid">
          <a href="#" class="article-card">
            <div class="article-img" style="background-image: url('https://images.unsplash.com/photo-1540959733332-eab4deabeeaf?w=600');"></div>
            <span class="article-category">飯店</span>
            <div class="article-body">
              <h3 class="article-title">東京人氣飯店10選</h3>
              <p class="article-meta">5分鐘閱讀</p>
            </div>
          </a>
          <a href="#" class="article-card">
            <div class="article-img" style="background-image: url('https://images.unsplash.com/photo-1551218808-94e220e084d2?w=600');"></div>
            <span class="article-category">美食</span>
            <div class="article-body">
              <h3 class="article-title">絕對要吃！日本美食BEST15</h3>
              <p class="article-meta">7分鐘閱讀</p>
            </div>
          </a>
          <a href="#" class="article-card">
            <div class="article-img" style="background-image: url('https://images.unsplash.com/photo-1493976040374-85c8e12f0c0e?w=600');"></div>
            <span class="article-category">觀光</span>
            <div class="article-body">
              <h3 class="article-title">櫻花季的IG打卡景點</h3>
              <p class="article-meta">6分鐘閱讀</p>
            </div>
          </a>
        </div>
      </div>

      <div class="outro-cta">
        <p class="outro-greeting">在日本的購物，您享受了嗎？</p>
        <p class="outro-text">下次預計推出「夏季號」，敬請期待！── 鄭世彬</p>
        <div class="outro-follow">
          <p class="follow-label">接收下一期通知</p>
          <div class="follow-buttons">
            <a href="#"><i class="fab fa-facebook-f"></i></a>
            <a href="#"><i class="fab fa-instagram"></i></a>
            <a href="#"><i class="fab fa-line"></i></a>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Sticky Bar -->
  <div class="sticky-bar" id="stickyBar">
    <div class="sticky-inner">
      <div class="sticky-info">
        <div class="sticky-count"><i class="fas fa-heart"></i> 已加入<span id="listCount">0</span>件到清單</div>
        <div class="sticky-hint">點擊查看清單</div>
      </div>
      <button class="sticky-btn" onclick="openListModal()">
        <i class="fas fa-list-check"></i> 查看購物清單
      </button>
    </div>
  </div>

  <!-- Footer -->
  <footer class="footer">
    <div class="footer-inner">
      <div class="footer-top">
        <div class="footer-collab">
          <img src="https://japankuru.com/gld-kanri/data/themes/japankuru/assets/images/logo.svg" alt="JAPANKURU">
          <span>×</span>
          <span>日本藥妝研究室</span>
        </div>
        <div class="footer-links">
          <a href="#">日本藥妝研究室 Facebook</a>
          <a href="#">JAPANKURU台灣</a>
          <a href="#">Instagram</a>
        </div>
      </div>
      <div class="footer-bottom">© 2026 JAPANKURU × JapanCosmeLab</div>
    </div>
  </footer>

  <!-- PC Detail Modal -->
  <div class="modal-overlay" id="detailModal">
    <div class="detail-modal">
      <button class="modal-close" onclick="closeDetailModal()"><i class="fas fa-times"></i></button>
      <div class="modal-visual" id="modalVisual">
        <img src="" alt="" class="modal-product-img" id="modalImg">
      </div>
      <div class="modal-body">
        <h2 class="modal-product-name" id="modalName">商品名</h2>
        <div class="modal-product-price" id="modalPrice">¥0</div>
        
        <div class="modal-tei-voice">
          <div class="tei-voice-head">
            <img src="https://www.gldaily.com/gld-kanri/wp-content/uploads/2026/02/IMG_9997-拷贝-scaled.png" alt="鄭老師" loading="lazy">
            <div class="tei-voice-meta">
              <p class="tei-voice-name">鄭世彬</p>
              <p class="tei-voice-title">日本藥妝研究家</p>
            </div>
          </div>
          <p class="tei-voice-text" id="modalTip"></p>
        </div>

        <div class="modal-voices" id="modalVoices">
          <div class="modal-voices-header">
            <span class="modal-voices-label">體驗者評價</span>
            <span class="modal-voices-count" id="modalVoiceCount">0則</span>
          </div>
          <div class="modal-voices-list" id="modalVoiceList"></div>
        </div>

        <div class="modal-actions">
          <a href="#" class="modal-official-btn" id="modalOfficialBtn" target="_blank">
            <i class="fas fa-external-link-alt"></i> 官方網站
          </a>
          <button class="modal-line-btn" onclick="shareToLineProduct()">
            <i class="fab fa-line"></i> LINE分享
          </button>
          <button class="modal-heart-btn" id="modalHeartBtn" onclick="toggleListFromModal()">
            <i class="far fa-heart"></i>
          </button>
        </div>
        <a href="#" class="modal-cta" id="modalCta" target="_blank" style="display:none;">閱讀專欄 →</a>
      </div>
    </div>
  </div>

  <!-- List Modal -->
  <div class="modal-overlay" id="listModal">
    <div class="list-modal">
      <div class="list-header">
        <h3><i class="fas fa-heart" style="color: var(--accent);"></i> 我的清單</h3>
        <button class="modal-close" onclick="closeListModal()" style="position:static;"><i class="fas fa-times"></i></button>
      </div>
      <div class="list-items" id="listItems"></div>
      <div class="list-screenshot-tip" id="listScreenshotTip" style="display: none;">
        <i class="fas fa-camera"></i>
        <span>小提示：截圖保存清單，到店裡直接對照購買！</span>
      </div>
      <div class="list-footer" id="listFooter" style="display: none;">
        <button class="share-btn line" onclick="shareToLine()"><i class="fab fa-line"></i> LINE</button>
        <button class="share-btn copy" onclick="copyUrl()"><i class="fas fa-link"></i> 複製網址</button>
      </div>
    </div>
  </div>

  <!-- Mobile Bottom Sheet -->
  <div class="bottomsheet-overlay" id="bsOverlay" onclick="closeBottomSheet()">
    <div class="bottomsheet" onclick="event.stopPropagation()">
      <div class="bs-handle"><div class="bs-handle-bar"></div></div>
      
      <div class="bs-product-visual" id="bsVisual">
        <img src="" alt="" id="bsImg">
      </div>

      <div class="bs-product-info-bar">
        <h3 class="bs-product-name" id="bsName">商品名</h3>
        <p class="bs-product-price" id="bsPrice">¥0</p>
      </div>

      <div class="bs-content">
        <div class="bs-tei-voice">
          <div class="tei-voice-head">
            <img src="https://www.gldaily.com/gld-kanri/wp-content/uploads/2026/02/IMG_9997-拷贝-scaled.png" alt="鄭老師" loading="lazy">
            <div class="tei-voice-meta">
              <p class="tei-voice-name">鄭世彬</p>
              <p class="tei-voice-title">日本藥妝研究家</p>
            </div>
          </div>
          <p class="tei-voice-text" id="bsTip"></p>
        </div>

        <a href="#" class="bs-column-link" id="bsColumn" style="display:none;">
          <div class="bs-column-icon"><i class="fas fa-book-open"></i></div>
          <div class="bs-column-text">
            <p class="bs-column-label">相關專欄</p>
            <p class="bs-column-title" id="bsColumnTitle">專欄標題</p>
          </div>
          <span class="bs-column-arrow">→</span>
        </a>

        <div class="bs-voices" id="bsVoices">
          <div class="bs-voices-header">
            <span class="bs-voices-label">體驗者評價</span>
            <span class="bs-voices-count" id="bsVoiceCount">0則</span>
          </div>
          <div class="bs-voice-list" id="bsVoiceList"></div>
        </div>
      </div>

      <div class="bs-actions">
        <a href="#" class="bs-official-btn" id="bsOfficialBtn" target="_blank">
          <i class="fas fa-external-link-alt"></i> 官方網站
        </a>
        <button class="bs-line-btn" onclick="shareToLineFromBS()">
          <i class="fab fa-line"></i>
        </button>
        <button class="bs-heart-btn" id="bsHeartBtn" onclick="toggleListFromBottomSheet()">
          <i class="far fa-heart"></i>
        </button>
      </div>
    </div>
  </div>

  <!-- Back to Top -->
  <button class="back-to-top" id="backToTop" onclick="window.scrollTo({top:0,behavior:'smooth'})">
    <i class="fas fa-chevron-up"></i>
  </button>

  <!-- Toast -->
  <div class="toast" id="toast"><i class="fas fa-check"></i> <span id="toastText"></span></div>

  <script>
    const chePhoto = 'https://www.gldaily.com/gld-kanri/wp-content/uploads/2026/02/IMG_9990-拷贝-scaled.png';

    function isMobile() { return window.innerWidth <= 768; }

    let currentModalId = null;
    let currentBsId = null;

    // Sakura animation
    function createSakuraPetals() {
      const hero = document.getElementById('hero');
      for (let i = 0; i < 20; i++) {
        const petal = document.createElement('div');
        petal.className = 'sakura-petal';
        petal.style.left = Math.random() * 100 + '%';
        petal.style.animationDuration = (Math.random() * 6 + 10) + 's';
        petal.style.animationDelay = (Math.random() * 15) + 's';
        hero.appendChild(petal);
      }
    }
    createSakuraPetals();

    // Scroll effects
    window.addEventListener('scroll', function() {
      const header = document.getElementById('header');
      const stickyBar = document.getElementById('stickyBar');
      const backToTop = document.getElementById('backToTop');
      if (window.scrollY > 100) {
        header.classList.add('scrolled');
        stickyBar.classList.add('visible');
      } else {
        header.classList.remove('scrolled');
        stickyBar.classList.remove('visible');
      }
      if (window.scrollY > 600) {
        backToTop.classList.add('visible');
      } else {
        backToTop.classList.remove('visible');
      }
    });

    // Product Data
    const tabData = {
      cosme: {
        title: '彩妝・美容',
        products: [
          { 
            id: 1, 
            slug: 'biore-cleanse',
            name: 'Bioré The CLEANSE 卸妝油', 
            brand: '花王',
            price: 350, 
            image: 'https://www.gldaily.com/gld-kanri/wp-content/uploads/2025/12/20250303-001-01.webp', 
            label: 'type-deal', 
            labelText: '比台灣便宜',
            plan: 'platinum',
            originalUrl: 'https://www.kao.co.jp/biore/lineup/cleanse/',
            tip: '<strong>比台灣便宜30%以上！</strong>花王獨家「瞬浮技術」不用搓揉就能浮起彩妝的革命性卸妝油。',
            tipFull: '<strong>比台灣便宜30%以上！</strong>花王於2023年推出的革命性卸妝油。獨家「瞬浮技術」不用搓揉就能卸妝。',
            column: 'https://japankuru.com/biore-cleanse', 
            hasVideo: true,
            videoId: 'odWKXZBhaTU',
            voices: [
              { initial: 'M', name: 'Mei', attr: '20代・混合肌', text: '真的不用搓揉就能卸妝！眼線也能輕鬆卸除。', date: '2024.11', color: '#E91E63', snsUrl: 'https://www.instagram.com/p/biore1/' },
              { initial: 'Y', name: 'Yuki', attr: '30代・乾燥肌', text: '比在台灣買便宜太多了！大量囤貨。', date: '2024.10', color: '#9C27B0', snsUrl: 'https://www.instagram.com/p/biore2/' },
              { initial: 'L', name: 'Lin', attr: '20代・OL', text: '接睫毛也能用真的很開心。', date: '2024.10', color: '#3F51B5', snsUrl: 'https://www.instagram.com/p/biore3/' },
              { initial: 'S', name: 'Saki', attr: '40代・主婦', text: '全家都在用。CP值超高！', date: '2024.09', color: '#009688', snsUrl: 'https://www.instagram.com/p/biore4/' },
              { initial: 'A', name: 'Amy', attr: '20代・學生', text: '朋友推薦買的，完全正確。', date: '2024.09', color: '#FF5722', snsUrl: 'https://www.instagram.com/p/biore5/' },
              { initial: 'J', name: 'Jia', attr: '30代', text: '不用二次洗臉所以很省時！忙碌的早晨最棒了。', date: '2024.08', color: '#795548', snsUrl: 'https://www.instagram.com/p/biore6/' },
              { initial: 'C', name: 'Chen', attr: '20代', text: '毛孔黑頭變得不那麼明顯了。', date: '2024.08', color: '#607D8B', snsUrl: 'https://www.instagram.com/p/biore7/' },
              { initial: 'T', name: 'Tina', attr: '30代・敏感肌', text: '敏感肌但用起來沒有刺激感。', date: '2024.07', color: '#4CAF50', snsUrl: 'https://www.instagram.com/p/biore8/' },
              { initial: 'W', name: 'Wang', attr: '40代', text: '跟女兒一起用。兩個人一瓶可以用一個月。', date: '2024.07', color: '#FF9800', snsUrl: 'https://www.instagram.com/p/biore9/' },
              { initial: 'H', name: 'Hana', attr: '20代', text: '每次來日本必買。', date: '2024.06', color: '#2196F3', snsUrl: 'https://www.instagram.com/p/biore10/' }
            ],
            voiceCount: 10
          },
          { 
            id: 2, 
            slug: 'yunth-vc-serum',
            name: 'Yunth 生VC美白精華液', 
            brand: 'Yunth',
            price: 3960, 
            image: 'https://www.gldaily.com/gld-kanri/wp-content/uploads/2025/12/Yunth-生VC美白美容液.png', 
            label: 'type-exclusive', 
            labelText: '日本限定',
            plan: 'platinum',
            originalUrl: 'https://yunth.jp/products/vc-serum',
            tip: '100%純度生維他命C。獨立包裝防止氧化，以開封30秒的新鮮度送達的日本限定精華液。',
            tipFull: '日本限定＆在社群媒體上超火爆的美白精華液。不使用一滴水的100%純度維他命C，以獨立包裝防止氧化。',
            column: 'https://japankuru.com/yunth', 
            hasVideo: true,
            videoId: 'odWKXZBhaTU',
            voices: [
              { initial: 'L', name: 'Lisa', attr: '20代・混合肌', text: '獨立包裝所以不會氧化！每天早上都在用。', date: '2024.11', color: '#E91E63', snsUrl: 'https://www.instagram.com/p/yunth1/' },
              { initial: 'M', name: 'Miki', attr: '30代・敏感肌', text: '敏感肌也不會刺痛。感覺透明感出來了。', date: '2024.10', color: '#9C27B0', snsUrl: 'https://www.instagram.com/p/yunth2/' },
              { initial: 'Y', name: 'Yuna', attr: '20代', text: '買來當朋友的伴手禮。對方很開心！', date: '2024.09', color: '#3F51B5', snsUrl: 'https://www.instagram.com/p/yunth3/' },
              { initial: 'A', name: 'Amy', attr: '30代・乾燥肌', text: '早上用的話到傍晚肌膚都有提亮的感覺。', date: '2024.08', color: '#009688', snsUrl: 'https://www.instagram.com/p/yunth4/' },
              { initial: 'K', name: 'Kana', attr: '20代', text: '感覺斑點變淡了！確定回購。', date: '2024.07', color: '#FF5722', snsUrl: 'https://www.instagram.com/p/yunth5/' },
              { initial: 'R', name: 'Rina', attr: '30代・OL', text: '一開始30秒用完會緊張，但習慣後很舒服。', date: '2024.07', color: '#795548', snsUrl: 'https://www.instagram.com/p/yunth6/' },
              { initial: 'N', name: 'Nana', attr: '20代・學生', text: '在IG上看到很好奇！實際用了真的很好。', date: '2024.06', color: '#607D8B', snsUrl: 'https://www.instagram.com/p/yunth7/' },
              { initial: 'H', name: 'Hana', attr: '40代', text: '一直在意年齡肌的暗沈，但開始用這個之後被稱讚的次數增加了。', date: '2024.06', color: '#4CAF50', snsUrl: 'https://www.instagram.com/p/yunth8/' },
              { initial: 'C', name: 'Chie', attr: '30代・主婦', text: '育兒再忙也因為獨立包裝很輕鬆。', date: '2024.05', color: '#FF9800', snsUrl: 'https://www.instagram.com/p/yunth9/' },
              { initial: 'T', name: 'Tomo', attr: '20代', text: '推薦給男友後他說皮膚變好了！', date: '2024.05', color: '#2196F3', snsUrl: 'https://www.instagram.com/p/yunth10/' }
            ],
            voiceCount: 10
          },
          { 
            id: 3, 
            slug: 'uv-stick-sarasara',
            name: '紫外線予報 清爽UV防曬棒', 
            brand: '石澤研究所',
            price: 1870, 
            image: 'https://www.gldaily.com/gld-kanri/wp-content/uploads/2025/12/outline-01.jpg', 
            label: 'type-hot', 
            labelText: '話題',
            plan: 'platinum',
            originalUrl: 'https://www.ishizawa-lab.co.jp/shigaisen/sarasara-uv-stick.html',
            tip: '上市後立刻限購的話題作！不弄髒手的棒狀防曬。兒童也OK，全家都能用。',
            tipFull: '比台灣便宜＆2024年最受矚目的防曬產品。上市後各店鋪都限購的超人氣商品。',
            column: 'https://japankuru.com/uv-stick', 
            hasVideo: true,
            videoId: 'odWKXZBhaTU',
            voices: [
              { initial: 'S', name: 'Saki', attr: '30代・主婦', text: '幫小孩塗很輕鬆！再怎麼動也沒關係。', date: '2024.11', color: '#E91E63', snsUrl: 'https://www.instagram.com/p/uv1/' },
              { initial: 'R', name: 'Rina', attr: '20代・OL', text: '可以在妝上面補擦真的太棒了。', date: '2024.11', color: '#9C27B0', snsUrl: 'https://www.instagram.com/p/uv2/' },
              { initial: 'E', name: 'Emi', attr: '40代', text: '不黏膩所以夏天也能舒適使用。', date: '2024.10', color: '#3F51B5', snsUrl: 'https://www.instagram.com/p/uv3/' },
              { initial: 'N', name: 'Nana', attr: '20代', text: '小巧可以放進化妝包！旅行必備。', date: '2024.10', color: '#009688', snsUrl: 'https://www.instagram.com/p/uv4/' },
              { initial: 'H', name: 'Hana', attr: '30代・敏感肌', text: '敏感肌但沒有發炎。會回購。', date: '2024.09', color: '#FF5722', snsUrl: 'https://www.instagram.com/p/uv5/' },
              { initial: 'T', name: 'Tomo', attr: '20代', text: '塗完之後清爽很舒服。', date: '2024.09', color: '#795548', snsUrl: 'https://www.instagram.com/p/uv6/' },
              { initial: 'C', name: 'Chie', attr: '30代', text: '全家4口人一起用。CP值很高。', date: '2024.08', color: '#607D8B', snsUrl: 'https://www.instagram.com/p/uv7/' },
              { initial: 'J', name: 'Jun', attr: '40代・男性', text: '男生也好用。打高爾夫的時候很好用。', date: '2024.08', color: '#4CAF50', snsUrl: 'https://www.instagram.com/p/uv8/' },
              { initial: 'W', name: 'Waka', attr: '20代', text: '在IG上看到就買了。真的很好！', date: '2024.07', color: '#FF9800', snsUrl: 'https://www.instagram.com/p/uv9/' },
              { initial: 'F', name: 'Fumi', attr: '30代', text: '比在台灣買便宜太多。大量囤貨了。', date: '2024.07', color: '#2196F3', snsUrl: 'https://www.instagram.com/p/uv10/' }
            ],
            voiceCount: 10
          }
        ]
      },
      medicine: {
        title: '醫藥品',
        products: [
          { 
            id: 4, 
            slug: 'pabron-ace-prox',
            name: 'Pabron Ace Pro-X', 
            brand: '大正製藥',
            price: 1518, 
            image: 'https://placehold.co/400x250/f4f6f8/666?text=Pabron', 
            label: 'type-exclusive', 
            labelText: '日本限定',
            plan: 'gold',
            originalUrl: 'https://www.taisho.co.jp/pabron/',
            tip: '<strong>日本限定的長銷感冒藥。</strong>全家都能用的經典款。',
            tipFull: '<strong>日本限定的長銷感冒藥。</strong>全家都能用的經典款。只有日本藥局才買得到的配方。',
            column: 'https://japankuru.com/pabron', 
            hasVideo: true,
            videoId: 'odWKXZBhaTU',
            voices: [
              { initial: 'C', name: 'Chen', attr: '40代', text: '每次來日本都會買。台灣買不到。', date: '2024.11', color: '#E91E63', snsUrl: 'https://www.instagram.com/p/pab1/' },
              { initial: 'W', name: 'Wang', attr: '30代', text: '全家都能用。效果很確實。', date: '2024.10', color: '#9C27B0', snsUrl: 'https://www.instagram.com/p/pab2/' },
              { initial: 'L', name: 'Lee', attr: '50代', text: '20年以上只用這個。值得信賴。', date: '2024.09', color: '#3F51B5', snsUrl: 'https://www.instagram.com/p/pab3/' },
              { initial: 'H', name: 'Huang', attr: '30代', text: '也有兒童版真的很開心。', date: '2024.08', color: '#009688', snsUrl: 'https://www.instagram.com/p/pab4/' },
              { initial: 'Z', name: 'Zhang', attr: '40代', text: '每次來日本出差都大量囤貨。', date: '2024.07', color: '#FF5722', snsUrl: 'https://www.instagram.com/p/pab5/' }
            ],
            voiceCount: 5
          }
        ]
      },
      health: {
        title: '健康食品・食品',
        products: [
          { 
            id: 7, 
            slug: 'collagen-c-jelly',
            name: '膠原蛋白C果凍 水蜜桃口味', 
            brand: 'EARTH製藥',
            price: 645, 
            image: 'https://placehold.co/400x250/f0f4f0/666?text=膠原蛋白C', 
            label: 'type-exclusive', 
            labelText: '日本限定',
            plan: 'standard',
            originalUrl: 'https://www.earth.jp/products/collagen-c-jelly/',
            tip: '<strong>日本限定＆最適合當伴手禮的膠原蛋白果凍。</strong>長銷商品。',
            tipFull: '<strong>日本限定＆最適合當伴手禮的膠原蛋白果凍。</strong>長銷商品。水蜜桃口味，美味又能持續食用。',
            column: 'https://japankuru.com/collagen', 
            hasVideo: false,
            voices: [
              { initial: 'A', name: 'Amy', attr: '30代', text: '買來當伴手禮分送。大家都說好吃很開心！', date: '2024.11', color: '#E91E63', snsUrl: 'https://www.instagram.com/p/col1/' },
              { initial: 'J', name: 'Jenny', attr: '40代', text: '每天都在吃。感覺皮膚狀況變好了。', date: '2024.10', color: '#9C27B0', snsUrl: 'https://www.instagram.com/p/col2/' },
              { initial: 'S', name: 'Sara', attr: '20代', text: '水蜜桃口味很好吃！容易持續。', date: '2024.09', color: '#3F51B5', snsUrl: 'https://www.instagram.com/p/col3/' },
              { initial: 'M', name: 'Mary', attr: '50代', text: '持續半年，肌膚彈性回來了。', date: '2024.08', color: '#009688', snsUrl: 'https://www.instagram.com/p/col4/' },
              { initial: 'K', name: 'Kate', attr: '30代', text: '價格也很實惠，容易持續。', date: '2024.07', color: '#FF5722', snsUrl: 'https://www.instagram.com/p/col5/' }
            ],
            voiceCount: 5
          }
        ]
      },
      daily: {
        title: '日用品',
        products: [
          { 
            id: 10, 
            slug: 'mondamin-premium-care',
            name: 'MONDAMIN PREMIUM CARE', 
            brand: 'EARTH製藥',
            price: 275, 
            image: 'https://placehold.co/400x250/f6f4f8/666?text=MONDAMIN', 
            label: 'type-deal', 
            labelText: '比台灣便宜',
            plan: 'basic',
            originalUrl: 'https://www.earth.jp/mondahmin/',
            tip: '<strong>比台灣便宜！</strong>日本藥妝店的經典漱口水。我全家都在愛用。推薦給早上起床口腔黏膩感困擾的人、想讓刷牙後的清爽感持續更久的人。金色薄荷口味有清爽感但不會太刺激，每天都好用是重點。也有大容量款，全家用也很耐用。在台灣買同樣的產品要將近2倍的價格，所以很多人在日本期間大量囤貨。含有牙科醫師推薦的殺菌成分，預防口臭也很有效。旅行中的口腔護理也很方便，請一定要看看。',
            tipFull: '<strong>比台灣便宜！</strong>日本藥妝店的經典漱口水。我全家都在愛用。推薦給早上起床口腔黏膩感困擾的人、想讓刷牙後的清爽感持續更久的人。金色薄荷口味有清爽感但不會太刺激，每天都好用是重點。也有大容量款，全家用也很耐用。在台灣買同樣的產品要將近2倍的價格，所以很多人在日本期間大量囤貨。含有牙科醫師推薦的殺菌成分，預防口臭也很有效。旅行中的口腔護理也很方便，請一定要看看。',
            column: null, 
            hasVideo: false,
            voices: [
              { initial: 'K', name: 'Kim', attr: '30代', text: '大容量很划算！全家都在用。', date: '2024.11', color: '#E91E63', snsUrl: 'https://www.instagram.com/p/mon1/' },
              { initial: 'L', name: 'Lee', attr: '40代', text: '每次來日本都囤貨。比台灣便宜太多了。', date: '2024.10', color: '#9C27B0', snsUrl: 'https://www.instagram.com/p/mon2/' },
              { initial: 'P', name: 'Park', attr: '30代', text: '口臭不再困擾了。', date: '2024.09', color: '#3F51B5', snsUrl: 'https://www.instagram.com/p/mon3/' },
              { initial: 'C', name: 'Choi', attr: '50代', text: '牙醫也推薦。', date: '2024.08', color: '#009688', snsUrl: 'https://www.instagram.com/p/mon4/' },
              { initial: 'Y', name: 'Yang', attr: '20代', text: '薄荷味不會太強，很喜歡。', date: '2024.07', color: '#FF5722', snsUrl: 'https://www.instagram.com/p/mon5/' }
            ],
            voiceCount: 5
          }
        ]
      }
    };

    let myList = JSON.parse(localStorage.getItem('cheGuide2026') || '[]');
    let currentTab = 'cosme';

    function renderTabs() {
      const container = document.getElementById('tabContents');
      container.innerHTML = '';

      Object.keys(tabData).forEach(function(key) {
        const data = tabData[key];
        const isActive = key === currentTab;
        let productsHtml = data.products.map(function(p) { return renderProduct(p); }).join('');
        container.innerHTML += '<div class="tab-content ' + (isActive ? 'active' : '') + '" id="tab-' + key + '"><div class="products-grid">' + productsHtml + '</div></div>';
      });
    }

    function renderProduct(p) {
      const isInList = myList.includes(p.id);
      const isBasicPlan = p.plan === 'basic';
      let avatars = '';
      if (p.voices) {
        avatars = p.voices.slice(0, 5).map(function(v) { 
          return '<span class="monitor-avatar" style="background-color:' + v.color + '">' + v.initial + '</span>';
        }).join('');
      }

      const hasVideoClass = p.hasVideo ? 'item-thumb-video' : '';
      const videoOverlay = p.hasVideo ? '<div class="video-overlay"><div class="video-play-btn"><i class="fas fa-play"></i></div><span class="video-label">觀看影片</span></div>' : '';
      const basicPlanClass = '';

      let html = '<article class="item-card' + basicPlanClass + '" data-id="' + p.id + '">';
      html += '<div class="item-thumb ' + hasVideoClass + '" onclick="openDetailModal(' + p.id + ')">';
      html += '<img src="' + p.image + '" alt="' + p.name + '">';
      if (p.label) html += '<span class="item-label ' + p.label + '">' + p.labelText + '</span>';
      html += videoOverlay;
      html += '<div class="media-indicators">';
      if (p.hasVideo) html += '<span class="media-tag"><i class="fas fa-play"></i> 影片</span>';
      if (p.column) html += '<span class="media-tag"><i class="fas fa-pen"></i> 文章</span>';
      html += '</div>';
      html += '<button class="btn-like-float ' + (isInList ? 'active' : '') + '" onclick="toggleList(' + p.id + ', event)"><i class="' + (isInList ? 'fas' : 'far') + ' fa-heart"></i></button>';
      html += '</div>';
      
      html += '<div class="item-content" onclick="handleCardClick(' + p.id + ', event)">';
      
      
      html += '<h3 class="item-name">' + p.name + '</h3>';
      html += '<div class="item-price-row"><span class="item-price">¥' + p.price.toLocaleString() + '</span>';
      if (p.labelText) html += '<span class="price-label">' + p.labelText + '</span>';
      html += '</div>';

      html += '<div class="che-section"><div class="che-header"><img src="' + chePhoto + '" class="che-face"><span class="che-name">鄭老師的推薦</span></div>';
      html += '<div class="che-comment-box"><p class="che-text' + '' + '">' + p.tip + '</p></div></div>';

      // Column preview for plans with column (standard, gold, platinum)
      if (p.column) {
        html += '<a href="' + p.column + '" class="column-preview" target="_blank" onclick="event.stopPropagation()">';
        html += '<div class="column-preview-icon"><i class="fas fa-book-open"></i></div>';
        html += '<div class="column-preview-content">';
        html += '<p class="column-preview-label">詳細解說專欄</p>';
        html += '<p class="column-preview-title">「' + p.name + '」徹底評測！</p>';
        html += '</div>';
        html += '<span class="column-preview-arrow"><i class="fas fa-chevron-right"></i></span>';
        html += '</a>';

        // Voice preview for plans with column - show 2 reviews on card
        if (p.voices && p.voices.length > 0) {
          html += '<div class="voice-preview-section">';
          html += '<div class="voice-preview-header"><i class="fas fa-comment-dots"></i> 體驗者心得</div>';
          p.voices.slice(0, 2).forEach(function(v) {
            html += '<div class="voice-preview-card">';
            html += '<div class="voice-preview-top">';
            html += '<div class="voice-preview-avatar" style="background-color:' + v.color + '">' + v.initial + '</div>';
            html += '<span class="voice-preview-name">' + v.name + '</span>';
            html += '<span class="voice-preview-attr">' + v.attr + '</span>';
            html += '</div>';
            html += '<p class="voice-preview-text">' + v.text + '</p>';
            html += '</div>';
          });
          html += '</div>';
        }
      }

      if (p.voices && p.voices.length > 0) {
        html += '<div class="monitor-preview"><div class="monitor-avatars">' + avatars + '</div>';
        html += '<span class="monitor-count">體驗評價 ' + p.voiceCount + '則</span>';
        html += '<i class="fas fa-chevron-right monitor-arrow"></i></div>';
      }

      // Original URL link - REMOVED from card, moved to modal
      
      html += '<div class="card-footer"><button class="btn-main" onclick="event.stopPropagation(); openDetailModal(' + p.id + ')"><span>查看詳情</span></button></div>';
      html += '</div>';
      
      html += '<button class="expand-toggle" onclick="toggleCardExpand(this, event)"><i class="fas fa-chevron-down"></i> <span></span></button>';
      html += '</article>';

      return html;
    }

    function shareItem(title) {
      if (navigator.share) {
        navigator.share({ title: title, url: location.href });
      } else {
        navigator.clipboard.writeText(location.href);
        showToast('已複製連結！');
      }
    }

    function toggleCardExpand(btn, event) {
      event.stopPropagation();
      const card = btn.closest('.item-card');
      card.classList.toggle('expanded');
    }

    function handleCardClick(id, event) {
      if (isMobile()) {
        const card = event.currentTarget.closest('.item-card');
        if (!card.classList.contains('expanded')) {
          card.classList.add('expanded');
          return;
        }
      }
      openDetailModal(id);
    }

    function switchTab(tab) {
      currentTab = tab;
      document.querySelectorAll('.tab-btn').forEach(function(btn) { btn.classList.remove('active'); });
      document.querySelector('[data-tab="' + tab + '"]').classList.add('active');
      document.querySelectorAll('.tab-content').forEach(function(content) { content.classList.remove('active'); });
      document.getElementById('tab-' + tab).classList.add('active');
      // Scroll tabs-nav into view if out of viewport
      var tabsNav = document.querySelector('.tabs-nav');
      var rect = tabsNav.getBoundingClientRect();
      if (rect.top < 60 || rect.top > window.innerHeight * 0.5) {
        window.scrollTo({ top: tabsNav.offsetTop - 70, behavior: 'smooth' });
      }
    }

    function getAllProducts() {
      let all = [];
      Object.values(tabData).forEach(function(t) { all = all.concat(t.products); });
      return all;
    }

    function scrollToProduct(id) {
      let targetTab = 'cosme';
      Object.keys(tabData).forEach(function(key) {
        if (tabData[key].products.some(function(p) { return p.id === id; })) targetTab = key;
      });
      switchTab(targetTab);
      setTimeout(function() {
        const card = document.querySelector('.item-card[data-id="' + id + '"]');
        if (card) {
          const offset = 140;
          window.scrollTo({ top: card.getBoundingClientRect().top + window.pageYOffset - offset, behavior: 'smooth' });
          card.classList.add('target-highlight');
          setTimeout(function() { card.classList.remove('target-highlight'); }, 2000);
        }
      }, 100);
    }

    function openDetailModal(id) {
      const all = getAllProducts();
      const p = all.find(function(x) { return x.id === id; });
      if (!p) return;

      // Set URL parameter with slug
      const url = new URL(window.location.href);
      url.searchParams.set('product', p.slug);
      window.history.replaceState({}, '', url);

      isMobile() ? openBottomSheet(p) : openPcModal(p);
    }

    function openPcModal(p) {
      const modal = document.getElementById('detailModal');
      const visual = document.getElementById('modalVisual');

      if (p.hasVideo && p.videoId) {
        visual.classList.add('has-video');
        visual.innerHTML = '<iframe src="https://www.youtube.com/embed/' + p.videoId + '?autoplay=0&rel=0" allowfullscreen></iframe>';
      } else {
        visual.classList.remove('has-video');
        visual.innerHTML = '<img src="' + p.image + '" alt="' + p.name + '" class="modal-product-img">';
      }

      document.getElementById('modalName').textContent = p.name;
      document.getElementById('modalPrice').textContent = '¥' + p.price.toLocaleString();
      document.getElementById('modalTip').innerHTML = p.tipFull || p.tip;

      const voicesDiv = document.getElementById('modalVoices');
      const voiceList = document.getElementById('modalVoiceList');

      if (p.voices && p.voices.length > 0) {
        voicesDiv.style.display = 'block';
        document.getElementById('modalVoiceCount').textContent = p.voiceCount + '則';
        voiceList.innerHTML = p.voices.map(function(v) {
          return '<div class="modal-voice-card"><div class="modal-voice-top"><div class="modal-voice-avatar" style="background-color:' + v.color + '">' + v.initial + '</div><div class="modal-voice-info"><p class="modal-voice-name">' + v.name + '</p><p class="modal-voice-attr">' + v.attr + '</p></div></div><p class="modal-voice-text">' + v.text + '</p><div class="modal-voice-footer"><span class="modal-voice-date">' + v.date + '</span><a href="' + v.snsUrl + '" target="_blank" class="sns-link-btn" onclick="event.stopPropagation()"><i class="fab fa-instagram"></i> 查看貼文</a></div></div>';
        }).join('');
      } else {
        voicesDiv.style.display = 'none';
      }

      const ctaBtn = document.getElementById('modalCta');
      if (p.column) {
        ctaBtn.href = p.column;
        ctaBtn.style.display = 'block';
      } else {
        ctaBtn.style.display = 'none';
      }

      // Set official URL
      const officialBtn = document.getElementById('modalOfficialBtn');
      if (p.originalUrl) {
        officialBtn.href = p.originalUrl;
        officialBtn.style.display = 'flex';
      } else {
        officialBtn.style.display = 'none';
      }

      currentModalId = p.id;
      updateModalHeartBtn();
      modal.classList.add('active');
    }

    function openBottomSheet(p) {
      const visual = document.getElementById('bsVisual');

      if (p.hasVideo && p.videoId) {
        visual.classList.add('has-video');
        visual.innerHTML = '<iframe src="https://www.youtube.com/embed/' + p.videoId + '?autoplay=0&rel=0&playsinline=1" allowfullscreen></iframe>';
      } else {
        visual.classList.remove('has-video');
        visual.innerHTML = '<img src="' + p.image + '" alt="' + p.name + '">';
      }

      document.getElementById('bsName').textContent = p.name;
      document.getElementById('bsPrice').textContent = '¥' + p.price.toLocaleString();
      document.getElementById('bsTip').innerHTML = p.tipFull || p.tip;

      const columnLink = document.getElementById('bsColumn');
      if (p.column) {
        columnLink.href = p.column;
        columnLink.style.display = 'flex';
        document.getElementById('bsColumnTitle').textContent = p.name + '的詳細解說';
      } else {
        columnLink.style.display = 'none';
      }

      const voicesDiv = document.getElementById('bsVoices');
      const voiceList = document.getElementById('bsVoiceList');

      if (p.voices && p.voices.length > 0) {
        voicesDiv.style.display = 'block';
        document.getElementById('bsVoiceCount').textContent = p.voiceCount + '則';
        voiceList.innerHTML = p.voices.map(function(v) {
          return '<div class="bs-voice-card"><div class="bs-voice-top"><div class="bs-voice-avatar" style="background-color:' + v.color + '">' + v.initial + '</div><div class="bs-voice-info"><p class="bs-voice-name">' + v.name + '</p><p class="bs-voice-attr">' + v.attr + '</p></div></div><p class="bs-voice-text">' + v.text + '</p><div class="bs-voice-footer"><span class="bs-voice-date">' + v.date + '</span><a href="' + v.snsUrl + '" target="_blank" class="bs-sns-link" onclick="event.stopPropagation()"><i class="fab fa-instagram"></i> 查看貼文</a></div></div>';
        }).join('');
      } else {
        voicesDiv.style.display = 'none';
      }

      // Set official URL
      const officialBtn = document.getElementById('bsOfficialBtn');
      if (p.originalUrl) {
        officialBtn.href = p.originalUrl;
        officialBtn.style.display = 'flex';
      } else {
        officialBtn.style.display = 'none';
      }

      currentBsId = p.id;
      updateBsHeartBtn();
      document.getElementById('bsOverlay').classList.add('is-open');
      document.body.style.overflow = 'hidden';
    }

    function closeBottomSheet() {
      // Clear URL parameter
      const url = new URL(window.location.href);
      url.searchParams.delete('product');
      window.history.replaceState({}, '', url);

      document.getElementById('bsOverlay').classList.remove('is-open');
      document.body.style.overflow = '';
      currentBsId = null;
    }

    function updateBsHeartBtn() {
      const btn = document.getElementById('bsHeartBtn');
      const isInList = myList.includes(currentBsId);
      btn.classList.toggle('active', isInList);
      btn.innerHTML = isInList ? '<i class="fas fa-heart"></i>' : '<i class="far fa-heart"></i>';
    }

    function toggleListFromBottomSheet() {
      if (!currentBsId) return;
      toggleList(currentBsId);
      updateBsHeartBtn();
    }

    function shareToLineFromBS() {
      if (!currentBsId) return;
      const all = getAllProducts();
      const p = all.find(function(x) { return x.id === currentBsId; });
      if (p) {
        const productUrl = window.location.origin + window.location.pathname + '?product=' + p.slug;
        const text = encodeURIComponent(p.name + '\n¥' + p.price.toLocaleString() + '\n\n' + productUrl);
        window.open('https://line.me/R/msg/text/?' + text, '_blank');
      }
    }

    function shareProductFromBS() {
      if (!currentBsId) return;
      const all = getAllProducts();
      const p = all.find(function(x) { return x.id === currentBsId; });
      if (p) shareItem(p.name);
    }

    function closeDetailModal() {
      // Clear URL parameter
      const url = new URL(window.location.href);
      url.searchParams.delete('product');
      window.history.replaceState({}, '', url);

      document.getElementById('detailModal').classList.remove('active');
      currentModalId = null;
    }

    function updateModalHeartBtn() {
      const btn = document.getElementById('modalHeartBtn');
      const isInList = myList.includes(currentModalId);
      btn.classList.toggle('active', isInList);
      btn.innerHTML = isInList ? '<i class="fas fa-heart"></i>' : '<i class="far fa-heart"></i>';
    }

    function shareToLineProduct() {
      if (!currentModalId) return;
      const all = getAllProducts();
      const p = all.find(function(x) { return x.id === currentModalId; });
      if (p) {
        const productUrl = window.location.origin + window.location.pathname + '?product=' + p.slug;
        const text = encodeURIComponent(p.name + '\n¥' + p.price.toLocaleString() + '\n\n' + productUrl);
        window.open('https://line.me/R/msg/text/?' + text, '_blank');
      }
    }

    function toggleList(id, event) {
      if (event) {
        event.stopPropagation();
        const btn = event.currentTarget;
        const icon = btn.querySelector('i');
        
        if (myList.includes(id)) {
          myList = myList.filter(function(x) { return x !== id; });
          btn.classList.remove('active');
          icon.classList.remove('fas');
          icon.classList.add('far');
          showToast('已從收藏中移除');
        } else {
          myList.push(id);
          btn.classList.add('active');
          icon.classList.remove('far');
          icon.classList.add('fas');
          btn.style.transform = 'scale(1.3)';
          setTimeout(function() { btn.style.transform = 'scale(1)'; }, 200);
          showToast('已加入清單！');
        }
        
        localStorage.setItem('cheGuide2026', JSON.stringify(myList));
        updateCount();
      } else {
        if (myList.includes(id)) {
          myList = myList.filter(function(x) { return x !== id; });
        } else {
          myList.push(id);
          showToast('已加入清單');
        }
        localStorage.setItem('cheGuide2026', JSON.stringify(myList));
        updateCount();
        renderTabs();
      }
    }

    function toggleListFromModal() {
      if (!currentModalId) return;
      toggleList(currentModalId);
      updateModalHeartBtn();
    }

    function updateCount() {
      document.getElementById('listCount').textContent = myList.length;
    }

    function openListModal() {
      const modal = document.getElementById('listModal');
      const container = document.getElementById('listItems');
      const footer = document.getElementById('listFooter');
      const screenshotTip = document.getElementById('listScreenshotTip');
      const all = getAllProducts();

      if (myList.length === 0) {
        container.innerHTML = '<div class="list-empty"><i class="far fa-heart"></i><p>尚未加入任何商品</p></div>';
        footer.style.display = 'none';
        screenshotTip.style.display = 'none';
      } else {
        container.innerHTML = myList.map(function(id) {
          const p = all.find(function(x) { return x.id === id; });
          if (!p) return '';
          return '<div class="list-item"><img src="' + p.image + '" class="list-item-img"><div class="list-item-info"><h4>' + p.name + '</h4><p>¥' + p.price.toLocaleString() + '</p></div><button class="list-item-remove" onclick="removeFromList(' + id + ')"><i class="fas fa-times"></i></button></div>';
        }).join('');
        footer.style.display = 'flex';
        screenshotTip.style.display = 'flex';
      }
      modal.classList.add('active');
    }

    function closeListModal() {
      document.getElementById('listModal').classList.remove('active');
    }

    function removeFromList(id) {
      myList = myList.filter(function(x) { return x !== id; });
      localStorage.setItem('cheGuide2026', JSON.stringify(myList));
      updateCount();
      renderTabs();
      openListModal();
    }

    function shareToLine() {
      const all = getAllProducts();
      const items = myList.map(function(id) {
        const p = all.find(function(x) { return x.id === id; });
        return p ? '・' + p.name + ' ¥' + p.price.toLocaleString() : '';
      }).filter(Boolean).join('\n');
      
      const text = encodeURIComponent('【鄭老師的推薦2026春】我的購物清單\n\n' + items + '\n\n詳情請看：' + location.href);
      window.open('https://line.me/R/msg/text/?' + text, '_blank');
    }

    function copyUrl() {
      navigator.clipboard.writeText(location.href);
      showToast('已複製網址！');
    }

    function copyCode(code) {
      navigator.clipboard.writeText(code);
      showToast('已複製優惠碼！');
    }

    function showToast(msg) {
      const toast = document.getElementById('toast');
      document.getElementById('toastText').textContent = msg;
      toast.classList.add('show');
      setTimeout(function() { toast.classList.remove('show'); }, 2500);
    }

    // Tab button events
    document.querySelectorAll('.tab-btn').forEach(function(btn) {
      btn.addEventListener('click', function() { switchTab(btn.dataset.tab); });
    });

    // Store tab events
    document.querySelectorAll('.store-tab').forEach(function(btn) {
      btn.addEventListener('click', function() {
        document.querySelectorAll('.store-tab').forEach(function(b) { b.classList.remove('active'); });
        btn.classList.add('active');
        const store = btn.dataset.store;
        document.querySelectorAll('.store-panel').forEach(function(p) { p.classList.remove('active'); });
        document.getElementById('store-' + store).classList.add('active');
      });
    });

    // Modal outside click close
    document.getElementById('detailModal').addEventListener('click', function(e) {
      if (e.target === document.getElementById('detailModal')) closeDetailModal();
    });

    document.getElementById('listModal').addEventListener('click', function(e) {
      if (e.target === document.getElementById('listModal')) closeListModal();
    });

    // Initialize
    renderTabs();
    updateCount();

    // Scroll-triggered fade-in animations
    const observerOptions = { threshold: 0.1, rootMargin: '0px 0px -40px 0px' };
    const fadeObserver = new IntersectionObserver(function(entries) {
      entries.forEach(function(entry) {
        if (entry.isIntersecting) {
          entry.target.classList.add('is-visible');
          fadeObserver.unobserve(entry.target);
        }
      });
    }, observerOptions);
    document.querySelectorAll('.split-banner-section, .featured-section, .products-section, .sakura-section, .store-guide, .outro-section').forEach(function(el) {
      el.classList.add('fade-section');
      fadeObserver.observe(el);
    });

    // Check URL parameter for direct product link
    (function() {
      const params = new URLSearchParams(window.location.search);
      const productSlug = params.get('product');
      if (productSlug) {
        setTimeout(function() {
          const all = getAllProducts();
          const p = all.find(function(x) { return x.slug === productSlug; });
          if (p) openDetailModal(p.id);
        }, 300);
      }
    })();

    // Hero photo + speech slideshow
    (function() {
      var current = 0;
      var total = 3;
      var interval = 4000;
      
      function goToSlide(n) {
        document.querySelectorAll('.tei-slide').forEach(function(el) { el.classList.remove('active'); });
        document.querySelectorAll('.speech-slide').forEach(function(el) { el.classList.remove('active'); });
        document.querySelectorAll('.tei-dot').forEach(function(el) { el.classList.remove('active'); });
        
        document.querySelectorAll('[data-slide="' + n + '"]').forEach(function(el) { el.classList.add('active'); });
        current = n;
      }
      
      // Auto rotate
      setInterval(function() {
        goToSlide((current + 1) % total);
      }, interval);
      
      // Click dots
      document.querySelectorAll('.tei-dot').forEach(function(dot) {
        dot.addEventListener('click', function() {
          goToSlide(parseInt(this.getAttribute('data-slide')));
        });
      });
    })();
    // Onboarding tooltip - show once for first-time visitors
    (function() {
      if (localStorage.getItem('cheOnboarded')) return;
      var tip = document.getElementById('onboardingTip');
      var shown = false;
      
      var observer = new IntersectionObserver(function(entries) {
        if (entries[0].isIntersecting && !shown) {
          shown = true;
          setTimeout(function() {
            tip.classList.add('show');
          }, 1500);
          // Auto-hide after 8 seconds
          setTimeout(function() {
            closeOnboarding();
          }, 9500);
        }
      }, { threshold: 0.3 });
      
      var productsSection = document.querySelector('.products-section');
      if (productsSection) observer.observe(productsSection);
    })();

    function closeOnboarding() {
      var tip = document.getElementById('onboardingTip');
      if (tip) {
        tip.style.opacity = '0';
        tip.style.transition = 'opacity 0.3s';
        setTimeout(function() { tip.style.display = 'none'; }, 300);
      }
      localStorage.setItem('cheOnboarded', '1');
    }

    /* === Sakura Date Matcher + Seasonal Switch === */
    (function() {
      var skCities = [
        { name:'福岡', bloom:'3/20', full:'3/28', fall:'4/1', snow:'4/4', img:'', tip:'', sensei:'福岡是日本最早開花的城市之一！舞鶴公園和西公園是賞櫻名所，搭配太宰府一日遊剛剛好 🚃' },
        { name:'東京', bloom:'3/24', full:'4/1', fall:'4/5', snow:'4/8', img:'', tip:'', sensei:'東京推薦上野公園和目黑川！3月底花粉也很厲害，記得做好花粉對策再出門賞櫻 😷' },
        { name:'大阪', bloom:'3/27', full:'4/3', fall:'4/7', snow:'4/10', img:'', tip:'', sensei:'大阪城公園和造幣局通り抜け是必去！造幣局只開放一週，要注意時間唷 🏯' },
        { name:'京都', bloom:'3/28', full:'4/5', fall:'4/9', snow:'4/12', img:'', tip:'', sensei:'京都的哲學之道和蹴上傾斜鐵道超美！人很多但值得，建議一大早去 🌸' },
        { name:'名古屋', bloom:'3/24', full:'4/2', fall:'4/6', snow:'4/9', img:'', tip:'', sensei:'名古屋城和鶴舞公園是賞櫻好去處！觀光客比東京少很多，可以悠閒享受 🎌' },
        { name:'札幌', bloom:'4/25', full:'5/2', fall:'5/6', snow:'5/9', img:'', tip:'', sensei:'5月的札幌完全沒有花粉！圓山公園可以邊烤肉邊賞櫻，是北海道獨特的體驗 🦌' },
        { name:'沖繩', bloom:'1/15', full:'2/1', fall:'2/8', snow:'2/12', img:'', tip:'', sensei:'沖繩的櫻花是深粉色的寒緋櫻，和本州完全不同。1～2月在今帰仁城跡就能看到！' },
        { name:'仙台', bloom:'4/5', full:'4/11', fall:'4/15', snow:'4/18', img:'', tip:'', sensei:'仙台的一目千本櫻超壯觀！白石川沿岸8公里的櫻花隧道，東北最美的賞櫻點 🚂' }
      ];

      function skParseDate(str, yr) {
        yr = yr || 2026;
        var p = str.split('/'); return new Date(yr, parseInt(p[0])-1, parseInt(p[1]));
      }

      /* --- Seasonal Auto-Switch --- */
      var now = new Date();
      var heroEl = document.getElementById('sakura-section');
      var detailEl = document.querySelector('.sakura-section');
      var senseiText = document.getElementById('skSenseiText');
      var phase1End = new Date(2026, 3, 15); // 4/15
      var phase2End = new Date(2026, 4, 10); // 5/10

      if (now > phase2End) {
        // Phase 3: season over — hide hero, simplify detail section
        if (heroEl) heroEl.style.display = 'none';
        if (detailEl) {
          var inner = detailEl.querySelector('.sakura-inner');
          if (inner) {
            inner.innerHTML = '<div class="sakura-ended">' +
              '<div class="sakura-ended-emoji">🌿</div>' +
              '<div class="sakura-ended-title">2026年的櫻花季已結束</div>' +
              '<p class="sakura-ended-text">感謝大家今年的賞櫻！<br>接下來進入夏季，別忘了防曬和消暑對策商品～</p>' +
              '<div style="display:flex;align-items:flex-start;gap:12px;max-width:460px;margin:16px auto 0;padding:16px;background:#FFF8F0;border-radius:12px;">' +
                '<img src="https://japankuru.com/gld-kanri/data/uploads/2025/02/IMG_9993-1-150x150.jpg" alt="鄭老師" style="width:44px;height:44px;border-radius:50%;object-fit:cover;">' +
                '<p style="font-size:13px;line-height:1.6;margin:0;">櫻花季結束了，但夏天的日本也很精彩！防曬、止汗、防蚊⋯⋯我的推薦商品都在上面，記得看看唷 ☀️</p>' +
              '</div>' +
            '</div>';
          }
        }
      } else if (now > phase1End && senseiText) {
        // Phase 2: tokyo/osaka ended, sapporo highlight
        senseiText.innerHTML = '東京・大阪的櫻花差不多結束了，但<strong style="color:#fff;">札幌現在正是滿開！</strong><br>5月去北海道完全沒有花粉困擾，推薦給怕花粉的朋友 🌸';
        var cityEls = document.querySelectorAll('.sakura-city');
        cityEls.forEach(function(el) {
          el.classList.remove('active');
          if (el.querySelector('.name') && el.querySelector('.name').textContent === '札幌') {
            el.classList.add('active');
          }
        });
      }
      // Phase 1 (default): as-is

      /* --- Date Matcher --- */
      document.getElementById('skDateBtn').addEventListener('click', function() {
        var sv = document.getElementById('skTravelStart').value;
        var ev = document.getElementById('skTravelEnd').value;
        if (!sv || !ev) return;
        var start = new Date(sv), end = new Date(ev);
        var best = null, bestScore = -999, bestStage = '';

        skCities.forEach(function(c) {
          var bloom = skParseDate(c.bloom), full = skParseDate(c.full);
          var fall = skParseDate(c.fall), snow = skParseDate(c.snow);
          var os = new Date(Math.max(start, bloom));
          var oe = new Date(Math.min(end, snow));
          var overlap = (oe - os) / 864e5;
          if (overlap > 0) {
            var mid = new Date((start.getTime() + end.getTime()) / 2);
            var dist = Math.abs(mid - full) / 864e5;
            var score = overlap * 10 - dist;
            if (score > bestScore) {
              bestScore = score; best = c;
              bestStage = mid < bloom ? 'before' : mid < full ? 'bloom' : mid < fall ? 'full' : mid < snow ? 'fall' : 'snow';
            }
          }
        });

        if (!best) { alert('該期間沒有適合賞櫻的城市，建議調整日期！'); return; }

        var info = {
          before: { icon:'🌱', badge:'即將開花', status:'還在含苞待放中！', idx:-1 },
          bloom:  { icon:'🌸', badge:'開花中',   status:'開花中！已經可以賞櫻了', idx:0 },
          full:   { icon:'🌺', badge:'滿開',     status:'滿開！最佳觀賞時期 🎉', idx:1 },
          fall:   { icon:'🍃', badge:'開始飄落',  status:'花瓣飄落中，別有一番風味', idx:2 },
          snow:   { icon:'💨', badge:'櫻花吹雪',  status:'櫻花吹雪！最後的浪漫', idx:3 }
        }[bestStage];

        // Fill result
        document.getElementById('skResultIcon').textContent = info.icon;
        document.getElementById('skResultBadge').textContent = info.badge;
        document.getElementById('skResultCity').textContent = best.name;
        document.getElementById('skResultStatus').textContent = info.status;

        // Fill dates
        document.getElementById('skDate0').textContent = best.bloom;
        document.getElementById('skDate1').textContent = best.full;
        document.getElementById('skDate2').textContent = best.fall;
        document.getElementById('skDate3').textContent = best.snow;

        // Progress bar state
        var stages = ['skStage0','skStage1','skStage2','skStage3'];
        stages.forEach(function(id, i) {
          var el = document.getElementById(id);
          el.classList.remove('is-past','is-current','is-future');
          if (i < info.idx) el.classList.add('is-past');
          else if (i === info.idx) el.classList.add('is-current');
          else el.classList.add('is-future');
        });

        // Progress fill width
        var fillPct = info.idx < 0 ? 0 : (info.idx / 3) * 100;
        document.getElementById('skProgressFill').style.width = fillPct + '%';

        // Sensei comment
        // Sensei comment now in speech bubble above photo

        // Update speech bubble
        var speechText = best.sensei || '你的旅程期間可以賞櫻！';
        document.getElementById('skSpeechText').textContent = speechText;
        var speech = document.getElementById('skSpeech');
        speech.style.animation = 'none';
        speech.offsetHeight; // trigger reflow
        speech.style.animation = 'skSpeechIn 0.4s ease-out';

        // Show
        var result = document.getElementById('skResultInline');
        result.classList.add('is-visible');
        document.getElementById('sakura-section').scrollIntoView({ behavior: 'smooth', block: 'start' });

        // Sync highlight to 4-stage photo cards below
        document.querySelectorAll('.sakura-stage').forEach(function(el) {
          el.classList.remove('is-highlight');
        });
        var targetIdx = info.idx;
        var targetCard = document.querySelector('.sakura-stage[data-stage-idx="' + targetIdx + '"]');
        if (targetCard) {
          targetCard.classList.add('is-highlight');
          setTimeout(function() {
            targetCard.scrollIntoView({ behavior: 'smooth', block: 'center' });
          }, 600);
        }
      });

      // Retry
      document.getElementById('skResultRetry').addEventListener('click', function() {
        document.getElementById('skResultInline').classList.remove('is-visible');
        document.querySelectorAll('.sakura-stage').forEach(function(el) {
          el.classList.remove('is-highlight');
        });
        document.getElementById('skSpeechText').textContent = '日期輸入好了嗎？我來幫你找最適合的城市！🌸';
        document.getElementById('skTravelStart').focus();
      });
    // Store Guide Tabs
    document.querySelectorAll('.sg-tab').forEach(function(tab) {
      tab.addEventListener('click', function() {
        document.querySelectorAll('.sg-tab').forEach(function(t) { t.classList.remove('is-active'); });
        document.querySelectorAll('.sg-panel').forEach(function(p) { p.classList.remove('is-active'); });
        this.classList.add('is-active');
        var target = document.getElementById('sg-' + this.dataset.sg);
        if (target) target.classList.add('is-active');
      });
    });

    // Section Nav scroll spy (mobile + PC)
    (function() {
      var mobileItems = document.querySelectorAll('.section-nav-item');
      var pcItems = document.querySelectorAll('.header-nav-item');
      var allNavItems = document.querySelectorAll('.section-nav-item, .header-nav-item');
      var sections = [];
      mobileItems.forEach(function(item) {
        var id = item.getAttribute('href').replace('#', '');
        var el = document.getElementById(id);
        if (el) sections.push({ id: id, el: el });
      });

      function updateNav() {
        var scrollY = window.scrollY + 100;
        var currentId = null;
        sections.forEach(function(s) {
          if (s.el.offsetTop <= scrollY) currentId = s.id;
        });
        allNavItems.forEach(function(n) { n.classList.remove('is-active'); });
        if (currentId) {
          allNavItems.forEach(function(n) {
            if (n.getAttribute('href') === '#' + currentId) n.classList.add('is-active');
          });
          var nav = document.getElementById('sectionNav');
          var activeM = nav ? nav.querySelector('.is-active') : null;
          if (activeM && nav) {
            var left = activeM.offsetLeft - nav.offsetWidth / 2 + activeM.offsetWidth / 2;
            nav.scrollTo({ left: left, behavior: 'smooth' });
          }
        }
      }

      window.addEventListener('scroll', updateNav, { passive: true });
      updateNav();

      allNavItems.forEach(function(item) {
        item.addEventListener('click', function(e) {
          e.preventDefault();
          var id = this.getAttribute('href').replace('#', '');
          var el = document.getElementById(id);
          if (el) {
            var top = el.offsetTop - 90;
            window.scrollTo({ top: top, behavior: 'smooth' });
          }
        });
      });
    })();
    })();
  </script>
</body>
</html>
